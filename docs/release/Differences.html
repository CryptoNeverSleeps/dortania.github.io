<!DOCTYPE html> 
<html lang="en-US" xml:lang="en-US" > 
<head><title>Differences</title> 
<meta  charset="utf-8" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<link rel="stylesheet" type="text/css" href="Differences.css" /> 
<meta name="src" content="Differences.tex" /> 
<link rel="stylesheet" type="text/css" href="../main.css" /></head><body 
><div class="center" 
>
<!--l. 137--><p class="noindent" >
</p><!--l. 144--><p class="noindent" > <img 
src="Logos/Logo-.png" alt="PIC"  
width="160" height="160"  />
</p><!--l. 148--><p class="noindent" >OpenCore
</p><!--l. 152--><p class="noindent" >Reference Manual (<span class="sout">0.5.9</span><span class="uwave">0.6.0</span>)
</p><!--l. 156--><p class="noindent" >[2020.08.19]
</p><!--l. 164--><p class="noindent" >Copyright ©2018-2020 vit9696
</p>
</div>
                                                                                                  
                                                                                                  
<h3 class="likesectionHead"><a 
 id="x1-1000"></a>Contents</h3>
<div class="tableofcontents">
<span class="sectionToc" >1 <a 
href="#x1-20001" id="QQ2-1-3">Introduction</a></span>
<br /> <span class="subsectionToc" >1.1 <a 
href="#x1-30001" id="QQ2-1-4">Generic Terms</a></span>
<br /><span class="sectionToc" >3 <a 
href="#x1-80003" id="QQ2-1-9">Setup</a></span>
<br /> <span class="subsectionToc" >3.1 <a 
href="#x1-90001" id="QQ2-1-10">Directory Structure</a></span>
<br /> <span class="subsectionToc" >3.3 <a 
href="#x1-110003" id="QQ2-1-12">Contribution</a></span>
<br /> <span class="subsectionToc" >3.4 <a 
href="#x1-120004" id="QQ2-1-15">Coding conventions</a></span>
<br /> <span class="subsectionToc" >4.6 <a 
href="#x1-200006" id="QQ2-1-23">Quirks Properties</a></span>
<br /><span class="sectionToc" >6 <a 
href="#x1-260006" id="QQ2-1-29">DeviceProperties</a></span>
<br /> <span class="subsectionToc" >6.1 <a 
href="#x1-270001" id="QQ2-1-30">Introduction</a></span>
<br /> <span class="subsectionToc" >6.2 <a 
href="#x1-280002" id="QQ2-1-31">Properties</a></span>
<br /> <span class="subsectionToc" >6.3 <a 
href="#x1-290003" id="QQ2-1-32">Common Properties</a></span>
<br /><span class="sectionToc" >7 <a 
href="#x1-300007" id="QQ2-1-33">Kernel</a></span>
<br /> <span class="subsectionToc" >7.1 <a 
href="#x1-310001" id="QQ2-1-34">Introduction</a></span>
<br /> <span class="subsectionToc" >7.2 <a 
href="#x1-320002" id="QQ2-1-35">Properties</a></span>
<br /> <span class="subsectionToc" >8.3 <a 
href="#x1-410003" id="QQ2-1-44">Boot Properties</a></span>
<br /> <span class="subsectionToc" >8.5 <a 
href="#x1-430005" id="QQ2-1-46">Security Properties</a></span>
<br /><span class="sectionToc" >10 <a 
href="#x1-5100010" id="QQ2-1-54">PlatformInfo</a></span>
<br /> <span class="subsectionToc" >11.4 <a 
href="#x1-610004" id="QQ2-1-65">OpenCanopy</a></span>
<br /> <span class="subsectionToc" >11.6 <a 
href="#x1-630006" id="QQ2-1-67">Properties</a></span>
<br /> <span class="subsectionToc" >11.7 <a 
href="#x1-640007" id="QQ2-1-68">APFS Properties</a></span>
<br /> <span class="subsectionToc" >11.8 <a 
href="#x1-650008" id="QQ2-1-69">Audio Properties</a></span>
<br /> <span class="subsectionToc" >11.11 <a 
href="#x1-6800011" id="QQ2-1-72">ProtocolOverrides Properties</a></span>
<br /> <span class="subsectionToc" >11.12 <a 
href="#x1-6900012" id="QQ2-1-73">Quirks Properties</a></span>
<br /> <span class="subsectionToc" >12.2 <a 
href="#x1-730002" id="QQ2-1-78">Debugging</a></span>
<br /> <span class="subsectionToc" >12.3 <a 
href="#x1-740003" id="QQ2-1-79">Tips and Tricks</a></span>
</div>
<a 
 id="x1-1001r1"></a>
<h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-20001"></a>Introduction</h3>
<!--l. 173--><p class="noindent" >This document provides information on <a 
href="https://github.com/acidanthera/OpenCorePkg" >OpenCore</a> user configuration file format used to setup the correct functioning of
macOS operating system. It is to be read as the official clarification of expected OpenCore behaviour. All deviations, if
found in published OpenCore releases, shall be considered documentation or implementation bugs, and are
requested to be reported through <a 
href="https://github.com/acidanthera/bugtracker" >Acidanthera Bugtracker</a>. <span class="uwave">Errata sheet is available in </span><a 
href="https://github.com/acidanthera/OpenCorePkg/blob/master/Docs/Errata/Errata.pdf" >OpenCorePkg repository</a><span class="uwave">.
</span>
</p><!--l. 184--><p class="noindent" >This document is structured as a specification, and is not meant to provide a step by step algorithm for configuring end-user
board support package (BSP). The intended audience of the document are programmers and engineers with
basic understanding of macOS internals and UEFI functioning. For these reasons this document is available
exclusively in English, and all other sources or translations of this document are unofficial and may contain
errors.
                                                                                                  
                                                                                                  
     </li>
     <li class="itemize">??</li></ul>
<!--l. 433--><p class="noindent" >It is possible to perform basic validation of the configuration by using <span class="sout">ConfigValidity</span><span class="uwave">ocvalidate</span> utility. Please note, that
<span class="sout">ConfigValidity</span><span class="uwave">ocvalidate</span> must match the used OpenCore release and may not be able to detect all configuration flaws
present in the file.
</p><!--l. 438--><p class="noindent" >Note: Currently most properties try to have defined values even if not specified in the configuration for safety reasons. This
behaviour should not be relied upon, and all fields must be properly specified in the configuration.
<a 
 id="x1-7001r5"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">3   </span> <a 
 id="x1-80003"></a>Setup</h3>
<a 
 id="x1-8001r8"></a>
<h4 class="subsectionHead"><span class="titlemark">3.1   </span> <a 
 id="x1-90001"></a>Directory Structure</h4>
<div class="center" 
>
<!--l. 446--><p class="noindent" >
                                                                                                  
                                                                                                  
Properties</a> section of this document.
</p><!--l. 625--><p class="noindent" >OC config, just like any property lists can be edited with any stock textual editor (e.g. nano, vim), but specialised software
may provide better experience. On macOS the preferred GUI application is <a 
href="https://developer.apple.com/xcode" >Xcode</a>. For a lightweight cross-platform and
open-source alternative <a 
href="https://github.com/corpnewt/ProperTree" >ProperTree</a> editor can be utilised.
</p><!--l. 633--><p class="noindent" >For BIOS booting a third-party UEFI environment provider will have to be used. OpenDuetPkg is one of the known UEFI
environment providers for legacy systems. To run OpenCore on such a legacy system you can install OpenDuetPkg with a
dedicated tool — BootInstall (bundled with OpenCore). <a 
href="https://github.com/corpnewt/gibMacOS" >Third-party utilities</a> can be used to perform this on systems different
from macOS.
</p><!--l. 640--><p class="noindent" >For upgrade purposes refer to Differences.pdf document, providing the information about the changes affecting the
configuration compared to the previous release, and Changelog.md document, containing the list of modifications across all
published updates.
<a 
 id="x1-10001r11"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">3.3   </span> <a 
 id="x1-110003"></a>Contribution</h4>
<!--l. 647--><p class="noindent" >OpenCore can be compiled as an ordinary <a 
href="https://github.com/tianocore/tianocore.github.io/wiki/EDK-II" >EDK II</a> package. Since <a 
href="https://github.com/tianocore/tianocore.github.io/wiki/UDK" >UDK</a> development was abandoned by TianoCore, OpenCore
requires the use of <a 
href="https://github.com/tianocore/tianocore.github.io/wiki/EDK-II#stable-tags" >EDK II Stable</a>. Currently supported EDK II release is hosted in <a 
href="https://github.com/acidanthera/audk" >acidanthera/audk</a>. The required patches for
the package are present in Patches directory.
</p><!--l. 656--><p class="noindent" >The only officially supported toolchain is XCODE5. Other toolchains might work, but are neither supported, nor recommended.
Contribution of clean patches is welcome. Please do follow <a 
href="https://github.com/tianocore/tianocore.github.io/wiki/Code-Style-C" >EDK II C Codestyle</a>.
</p><!--l. 661--><p class="noindent" >To compile with XCODE5, besides <a 
href="https://developer.apple.com/xcode" >Xcode</a>, one should also install <a 
href="https://www.nasm.us" >NASM</a> and <a 
href="https://github.com/acidanthera/ocbuild/tree/master/external" >MTOC</a>. The latest Xcode version is recommended
for use despite the toolchain name. Example command sequence may look as follows:
</p>
<!--l. 668-->
<a 
 id="x1-11001r1"></a>
<a 
 id="x1-11002"></a>
<div class="lstlisting" id="listing-1"><span class="label"><a 
 id="x1-11003r1"></a></span><span class="sout">git</span><span class="sout"> </span><span class="sout">clone</span><span class="sout"> </span><span class="sout">https</span><span class="sout">://</span><span class="sout">github</span><span class="sout">.</span><span class="sout">com</span><span class="sout">/</span><span class="sout">acidanthera</span><span class="sout">/</span><span class="sout">audk</span><span class="sout"> </span><span class="sout">UDK</span> <br /><span class="label"><a 
 id="x1-11004r2"></a></span><span class="uwave">git</span><span class="uwave"> </span><span class="uwave">clone</span><span class="uwave"> </span><span class="uwave">-</span><span class="uwave">-</span><span class="uwave">recursive</span><span class="uwave"> </span><span class="uwave">-</span><span class="uwave">-</span><span class="uwave">depth</span><span class="uwave">=1</span><span class="uwave"> </span><span class="uwave">https</span><span class="uwave">://</span><span class="uwave">github</span><span class="uwave">.</span><span class="uwave">com</span><span class="uwave">/</span><span class="uwave">acidanthera</span><span class="uwave">/</span><span class="uwave">audk</span><span class="uwave"> </span><span class="uwave">UDK</span> <br /><span class="label"><a 
 id="x1-11005r3"></a></span>cd UDK <br /><span class="label"><a 
 id="x1-11006r4"></a></span>git clone https://github.com/acidanthera/OpenCorePkg <br /><span class="label"><a 
 id="x1-11007r5"></a></span>source edksetup.sh <br /><span class="label"><a 
 id="x1-11008r6"></a></span>make -C BaseTools <br /><span class="label"><a 
 id="x1-11009r7"></a></span>build -a X64 -b RELEASE -t XCODE5 -p OpenCorePkg/OpenCorePkg.dsc
<figcaption class="caption" ><span class="id">Listing 1:</span><span  
class="content">Compilation Commands</span></figcaption><!--tex4ht:label?: x1-11001r -->
</div>
<!--l. 679--><p class="noindent" >For IDE usage Xcode projects are available in the root of the repositories. Another approach could be <a 
href="https://www.sublimetext.com" >Sublime Text</a> with
<a 
href="https://niosus.github.io/EasyClangComplete" >EasyClangComplete</a> plugin. Add .clang_complete file with similar content to your UDK root:
</p>
<!--l. 684-->
<a 
 id="x1-11010r2"></a>
<a 
 id="x1-11011"></a>
<div class="lstlisting" id="listing-2"><span class="label"><a 
 id="x1-11012r1"></a></span>-I/UefiPackages/MdePkg <br /><span class="label"><a 
 id="x1-11013r2"></a></span>-I/UefiPackages/MdePkg/Include <br /><span class="label"><a 
 id="x1-11014r3"></a></span>-I/UefiPackages/MdePkg/Include/X64 <br /><span class="label"><a 
 id="x1-11015r4"></a></span>-I/UefiPackages/MdeModulePkg <br /><span class="label"><a 
 id="x1-11016r5"></a></span>-I/UefiPackages/MdeModulePkg/Include <br /><span class="label"><a 
 id="x1-11017r6"></a></span>-I/UefiPackages/MdeModulePkg/Include/X64 <br /><span class="label"><a 
 id="x1-11018r7"></a></span>-I/UefiPackages/OpenCorePkg/Include/AMI <br /><span class="label"><a 
 id="x1-11019r8"></a></span>-I/UefiPackages/OpenCorePkg/Include/Acidanthera <br /><span class="label"><a 
 id="x1-11020r9"></a></span>-I/UefiPackages/OpenCorePkg/Include/Apple <br /><span class="label"><a 
 id="x1-11021r10"></a></span>-I/UefiPackages/OpenCorePkg/Include/Apple/X64 <br /><span class="label"><a 
 id="x1-11022r11"></a></span>-I/UefiPackages/OpenCorePkg/Include/Duet <br /><span class="label"><a 
 id="x1-11023r12"></a></span>-I/UefiPackages/OpenCorePkg/Include/Generic <br /><span class="label"><a 
 id="x1-11024r13"></a></span>-I/UefiPackages/OpenCorePkg/Include/Intel <br /><span class="label"><a 
 id="x1-11025r14"></a></span>-I/UefiPackages/OpenCorePkg/Include/Microsoft <br /><span class="label"><a 
 id="x1-11026r15"></a></span>-I/UefiPackages/OpenCorePkg/Include/VMware <br /><span class="label"><a 
 id="x1-11027r16"></a></span>-I/UefiPackages/OvmfPkg/Include <br /><span class="label"><a 
 id="x1-11028r17"></a></span>-I/UefiPackages/UefiCpuPkg/Include <br /><span class="label"><a 
 id="x1-11029r18"></a></span>-IInclude <br /><span class="label"><a 
 id="x1-11030r19"></a></span>-include <br /><span class="label"><a 
 id="x1-11031r20"></a></span>/UefiPackages/MdePkg/Include/Uefi.h <br /><span class="label"><a 
 id="x1-11032r21"></a></span>-fshort-wchar <br /><span class="label"><a 
 id="x1-11033r22"></a></span>-Wall <br /><span class="label"><a 
 id="x1-11034r23"></a></span>-Wextra <br /><span class="label"><a 
 id="x1-11035r24"></a></span>-Wno-unused-parameter <br /><span class="label"><a 
 id="x1-11036r25"></a></span>-Wno-missing-braces <br /><span class="label"><a 
 id="x1-11037r26"></a></span>-Wno-missing-field-initializers <br /><span class="label"><a 
 id="x1-11038r27"></a></span>-Wno-tautological-compare <br /><span class="label"><a 
 id="x1-11039r28"></a></span>-Wno-sign-compare <br /><span class="label"><a 
 id="x1-11040r29"></a></span>-Wno-varargs <br /><span class="label"><a 
 id="x1-11041r30"></a></span>-Wno-unused-const-variable <br /><span class="label"><a 
 id="x1-11042r31"></a></span>-DOC_TARGET_NOOPT=1 <br /><span class="label"><a 
 id="x1-11043r32"></a></span>-DNO_MSABI_VA_FUNCS=1
<figcaption class="caption" ><span class="id">Listing 2:</span><span  
class="content">ECC Configuration</span></figcaption><!--tex4ht:label?: x1-11010r -->
</div>
<!--l. 719--><p class="noindent" >Warning: Tool developers modifying config.plist or any other OpenCore files must ensure that their tool checks for
opencore-version NVRAM variable (see ?? section below) and warn the user if the version listed is unsupported or
prerelease. OpenCore configuration may change across the releases and the tool shall ensure that it carefully follows this
document. Failure to do so may result in this tool to be considered as malware and blocked with all possible
means.
<a 
 id="x1-11044r12"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">3.4   </span> <a 
 id="x1-120004"></a>Coding conventions</h4>
<!--l. 729--><p class="noindent" >Just like any other project we have conventions that we follow during the development. All third-party contributors are highly
                                                                                                  
                                                                                                  
     laptop, the original method can be replaced with a dummy name by patching _Q11 with XQ11.</li></ul>
<!--l. 1138--><p class="noindent" >Tianocore <a 
href="https://github.com/acidanthera/audk/blob/master/MdePkg/Include/IndustryStandard/AcpiAml.h" >AcpiAml.h</a> source file may help understanding ACPI opcodes.
</p><!--l. 1141--><p class="noindent" >Note: Patches of different Find and Replace lengths are unsupported as they may corrupt ACPI tables and make you system
unstable due to area relocation. If you need such changes you may <span class="sout">utilities </span><span class="uwave">utilise </span>“proxy” patching or NOP the remaining
area.
<a 
 id="x1-19025r22"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">4.6   </span> <a 
 id="x1-200006"></a>Quirks Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-20002x1">FadtEnableReset<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Provide reset register and flag in FADT table to enable reboot and shutdown.
     <!--l. 1157--><p class="noindent" >Mainly required on legacy hardware and few laptops. Can also fix power-button shortcuts. Not recommended
     unless required.
     </p></li>
     <li 
  class="enumerate" id="x1-20004x2">NormalizeHeaders<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description:  Cleanup  ACPI  header  fields  to  workaround  macOS  ACPI  implementation  bug  causing  boot
     crashes. Reference: <a 
href="https://alextjam.es/debugging-appleacpiplatform/" >Debugging AppleACPIPlatform on 10.13</a> by Alex James aka theracermaster. The issue is
     fixed in macOS Mojave (10.14).
     </li>
     <li 
  class="enumerate" id="x1-20006x3">RebaseRegions<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Attempt to heuristically relocate ACPI memory regions. Not recommended.
     <!--l. 1177--><p class="noindent" >ACPI   tables   are   often   generated   dynamically   by   underlying   firmware   implementation.   Among   the
     position-independent  code,  ACPI  tables  may  contain  physical  addresses  of  MMIO  areas  used  for  device
     configuration,  usually  grouped  in  regions  (e.g.  OperationRegion).  Changing  firmware  settings  or  hardware
     configuration, upgrading or patching the firmware inevitably leads to changes in dynamically generated ACPI
     code, which sometimes lead to the shift of the addresses in aforementioned OperationRegion constructions.
     </p><!--l. 1187--><p class="noindent" >For this reason it is very dangerous to apply any kind of modifications to ACPI tables. The most reasonable
     approach is to make as few as possible changes to ACPI and try to not replace any tables, especially DSDT.
     When this is not possible, then at least attempt to ensure that custom DSDT is based on the most recent DSDT
     or remove writes and reads for the affected areas.
     </p><!--l. 1194--><p class="noindent" >When nothing else helps this option could be tried to avoid stalls at PCI Configuration Begin phase of macOS
     booting by attempting to fix the ACPI addresses. It does not do magic, and only works with most common cases.
     Do not use unless absolutely required.
     </p></li>
     <li 
  class="enumerate" id="x1-20008x4">ResetHwSig<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Reset FACS table HardwareSignature value to 0.
     <!--l. 1206--><p class="noindent" >This works around firmwares that fail to maintain hardware signature across the reboots and cause issues with
     waking from hibernation.
     </p></li>
     <li 
  class="enumerate" id="x1-20010x5">ResetLogoStatus<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Reset BGRT table Displayed status field to false.
                                                                                                  
                                                                                                  
     
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
                                 

     
     
     
      
        
      
        
      
     
      
      
     
      
      
     
      
     
      
      
     
         
         
         
      
      
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
                
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
                          
      
     
     
      
     
     
      
     
      
      
     
                


      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
      
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
     
     
      
     
     
     
     
      
     
     
     
     
      
     
                                     </body>
</html>