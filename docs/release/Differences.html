<!DOCTYPE html> 
<html lang="en-US" xml:lang="en-US" > 
<head><title>Differences</title> 
<meta  charset="utf-8" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<link rel="stylesheet" type="text/css" href="Differences.css" /> 
<meta name="src" content="Differences.tex" /> 
<link rel="stylesheet" type="text/css" href="../main.css" /></head><body 
><div class="center" 
>
<!--l. 142--><p class="noindent" >
</p><!--l. 149--><p class="noindent" > <img 
src="Logos/Logo-.png" alt="PIC"  
width="160" height="160"  />
</p><!--l. 153--><p class="noindent" >OpenCore
</p><!--l. 157--><p class="noindent" >Reference Manual (0.6<span class="sout">.3</span><span class="uwave">.4</span>)
</p><!--l. 161--><p class="noindent" >[2020.12.29]
</p><!--l. 169--><p class="noindent" >Copyright ©2018-2020 vit9696
</p>
</div>
                                                                                                  
                                                                                                  
     loaded by the firmware by default according to UEFI specification, and Bootstrap.efi can be registered as a
     custom option to let OpenCore coexist with operating systems using BOOTx64.efi as their own loaders (e.g.
     Windows), see BootProtect for more details.
     </li>
     <li class="itemize">boot <br 
class="newline" />Duet bootstrap loader, which initialises UEFI environment on legacy BIOS firmware and loads OpenCore.efi
     similarly to other bootstrap loaders. Modern Duet bootstrap loader will default to OpenCore.efi on the same
     partition when present.
     </li>
     <li class="itemize">ACPI <br 
class="newline" />Directory used for storing supplemental ACPI information for ?? section.
     </li>
     <li class="itemize">Drivers <br 
class="newline" />Directory used for storing supplemental UEFI drivers for ?? section.
     </li>
     <li class="itemize">Kexts <br 
class="newline" />Directory used for storing supplemental kernel information for ?? section.
     </li>
     <li class="itemize">Resources <br 
class="newline" />Directory used for storing media resources, such as audio files for screen reader support. See ?? section for more
     details. This directory also contains image files for graphical user interface. See ?? section for more details.
     </li>
     <li class="itemize">Tools <br 
class="newline" />Directory used for storing supplemental tools.
     </li>
     <li class="itemize">OpenCore.efi <br 
class="newline" />Main booter driver responsible for operating system loading. <span class="uwave">The directory </span><span class="uwave">OpenCore.efi</span> <span class="uwave">resides is called the
     </span><span class="uwave">root directory</span><span class="uwave">. By default </span><span class="uwave">root directory</span> <span class="uwave">is set to </span><span class="uwave">EFI\OC</span><span class="uwave">, however, when launching </span><span class="uwave">OpenCore.efi</span> <span class="uwave">directly
     or through </span><span class="uwave">Bootstrap.efi</span><span class="uwave">, other directories containing </span><span class="uwave">OpenCore.efi</span> <span class="uwave">can also be supported. </span>
     </li>
     <li class="itemize">config.plist <br 
class="newline" />OC Config.
     </li>
     <li class="itemize">vault.plist <br 
class="newline" />Hashes for all files potentially loadable by OC Config.
     </li>
     <li class="itemize">vault.sig <br 
class="newline" />Signature for vault.plist.
     </li>
     <li class="itemize">SysReport <br 
class="newline" />Directory containing system reports generated by SysReport option.
     </li>
     <li class="itemize">nvram.plist <br 
class="newline" />OpenCore variable import file.
     </li>
     <li class="itemize">opencore-YYYY-MM-DD-HHMMSS.txt <br 
class="newline" />OpenCore log file.
     </li>
     <li class="itemize">panic-YYYY-MM-DD-HHMMSS.txt <br 
class="newline" />Kernel panic log file.</li></ul>
<!--l. 624--><p class="noindent" >Note: It is not guaranteed that paths longer than OC_STORAGE_SAFE_PATH_MAX (128 characters including <br 
class="newline" />0-terminator) will be accessible within OpenCore.
<a 
 id="x1-9001r10"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">3.2   </span> <a 
 id="x1-100002"></a>Installation and Upgrade</h4>
<!--l. 630--><p class="noindent" >To install OpenCore reflect the ?? described in the previous section on a EFI volume of a GPT partition. While corresponding
                                                                                                  
                                                                                                  
<!--l. 1299--><p class="noindent" >When debugging sleep issues Power Nap and automatic power off may be (temporarily) disabled, which appear to sometimes
cause wake to black screen or boot loop issues on older platforms. The particular issues may vary, but in general ACPI tables
should be looked up first. Here is an example of a bug found in some <a 
href="http://www.insanelymac.com/forum/topic/329624-need-cmos-reset-after-sleep-only-after-login/#entry2534645" >Z68 motherboards</a>. To turn Power Nap and the others off
run the following commands in Terminal: </p><!--l. 1305-->
<div class="lstlisting" id="listing-3"><span class="label"><a 
 id="x1-22001r1"></a></span>sudo pmset autopoweroff 0 <br /><span class="label"><a 
 id="x1-22002r2"></a></span>sudo pmset powernap 0 <br /><span class="label"><a 
 id="x1-22003r3"></a></span>sudo pmset standby 0
</div>
<!--l. 1311--><p class="noindent" >Note: These settings may reset at hardware change and in certain other circumstances. To view their current state use pmset
-g command in Terminal.
<a 
 id="x1-22004r25"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">5.2   </span> <a 
 id="x1-230002"></a>Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-23002x1">MmioWhitelist<br 
class="newline" />Type: plist array<br 
class="newline" />Description: Designed to be filled with plist dict values, describing addresses critical for particular firmware
     functioning when DevirtualiseMmio quirk is in use. See <a 
href="#x1-240003">MmioWhitelist Properties</a> section below.
     </li>
     <li 
  class="enumerate" id="x1-23004x2"><span class="uwave">Patch</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist array</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: Empty</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Perform binary patches in booter. </span>
     <!--l. 1333--><p class="noindent" ><span class="uwave">Designed to be filled with </span><span class="uwave">plist dictionary</span> <span class="uwave">values, describing each patch. See </span><a 
href="#x1-250004">Patch Properties</a> <span class="uwave">section below.
     </span>
     </p></li>
     <li 
  class="enumerate" id="x1-23006x3">Quirks<br 
class="newline" />Type: plist dict<br 
class="newline" />Description: Apply individual booter quirks described in <a 
href="#x1-260005">Quirks Properties</a> section below.
     </li></ol>
<a 
 id="x1-23007r26"></a>
<h4 class="subsectionHead"><span class="titlemark">5.3   </span> <a 
 id="x1-240003"></a>MmioWhitelist Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-24002x1">Address<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: Exceptional MMIO address, which memory descriptor should be left virtualised (unchanged) by
     DevirtualiseMmio. This means that the firmware will be able to directly communicate with this memory region
     during operating system functioning, because the region this value is in will be assigned a virtual address.
     <!--l. 1358--><p class="noindent" >The  addresses  written  here  must  be  part  of  the  memory  map,  have  EfiMemoryMappedIO type  and
     EFI_MEMORY_RUNTIME attribute (highest bit) set. To find the list of the candidates the debug log can be used.
     </p></li>
     <li 
  class="enumerate" id="x1-24004x2">Comment<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Empty string<br 
class="newline" />Description: Arbitrary ASCII string used to provide human readable reference for the entry. It is implementation
     defined whether this value is used.
     </li>
     <li 
  class="enumerate" id="x1-24006x3">Enabled<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: This address will be devirtualised unless set to true.
     </li></ol>
<a 
 id="x1-24007r27"></a>
<h4 class="subsectionHead"><span class="titlemark">5.4   </span> <a 
 id="x1-250004"></a><span class="uwave">Patch Properties</span></h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-25002x1"><span class="uwave">Arch</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist string</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: </span><span class="uwave">Any</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Booter patch architecture (</span><span class="uwave">Any</span><span class="uwave">, </span><span class="uwave">i386</span><span class="uwave">, </span><span class="uwave">x86_64</span><span class="uwave">). </span>
     </li>
     <li 
  class="enumerate" id="x1-25004x2"><span class="uwave">Comment</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist string</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: Empty string</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Arbitrary ASCII string used to provide human readable reference for the entry. It is implementation
     defined whether this value is used. </span>
     </li>
     <li 
  class="enumerate" id="x1-25006x3"><span class="uwave">Count</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist integer</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: </span><span class="uwave">0</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Number of patch occurrences to apply. </span><span class="uwave">0</span> <span class="uwave">applies the patch to all occurrences found. </span>
     </li>
     <li 
  class="enumerate" id="x1-25008x4"><span class="uwave">Enabled</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist boolean</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: </span><span class="uwave">false</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: This booter patch will not be used unless set to </span><span class="uwave">true</span><span class="uwave">. </span>
     </li>
     <li 
  class="enumerate" id="x1-25010x5"><span class="uwave">Find</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist data</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: Empty data</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Data to find. This must equal to </span><span class="uwave">Replace</span> <span class="uwave">in size. </span>
     </li>
     <li 
  class="enumerate" id="x1-25012x6"><span class="uwave">Identifier</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist string</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: Empty string</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: </span><span class="uwave">Apple</span> <span class="uwave">for macOS booter (generally </span><span class="uwave">boot.efi</span><span class="uwave">); or a name with suffix (e.g. </span><span class="uwave">bootmgfw.efi</span><span class="uwave">) for a
     specific booter; or </span><span class="uwave">Any</span> <span class="uwave">/ empty string (failsafe) to match any booter. </span>
     </li>
     <li 
  class="enumerate" id="x1-25014x7"><span class="uwave">Limit</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist integer</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: </span><span class="uwave">0</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Maximum number of bytes to search for. Can be set to </span><span class="uwave">0</span> <span class="uwave">to look through the whole booter. </span>
     </li>
     <li 
  class="enumerate" id="x1-25016x8"><span class="uwave">Mask</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist data</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: Empty data</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Data bitwise mask used during find comparison. Allows fuzzy search by ignoring not masked (set
     to zero) bits. Can be set to empty data to be ignored. Must equal to </span><span class="uwave">Find</span> <span class="uwave">in size otherwise. </span>
     </li>
     <li 
  class="enumerate" id="x1-25018x9"><span class="uwave">Replace</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist data</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: Empty data</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Replacement data of one or more bytes. </span>
     </li>
     <li 
  class="enumerate" id="x1-25020x10"><span class="uwave">ReplaceMask</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist data</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: Empty data</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Data bitwise mask used during replacement. Allows fuzzy replacement by updating masked (set
     to non-zero) bits. Can be set to empty data to be ignored. Must equal to </span><span class="uwave">Replace</span> <span class="uwave">in size otherwise. </span>
     </li>
     <li 
  class="enumerate" id="x1-25022x11"><span class="uwave">Skip</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist integer</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: </span><span class="uwave">0</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Number of found occurrences to be skipped before replacement is done. </span>
     </li></ol>
<a 
 id="x1-25023r28"></a>
<h4 class="subsectionHead"><span class="titlemark">5.5   </span> <a 
 id="x1-260005"></a>Quirks Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-26002x1"><span class="uwave">AllowRelocationBlock</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist boolean</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: </span><span class="uwave">false</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Allows booting macOS through a relocation block. </span>
     <!--l. 1491--><p class="noindent" ><span class="uwave">Relocation block is a scratch buffer allocated in lower 4 GB to be used for loading the kernel and related structures
     by EfiBoot on firmwares where lower memory is otherwise occupied by the (assumed to be) non-runtime data.
     Right before kernel startup the relocation block is copied back to lower addresses. Similarly all the other addresses
     pointing to relocation block are also carefully adjusted. Relocation block can be used when: </span>
</p>
         <ul class="itemize1">
         <li class="itemize"><span class="uwave">No better slide exists (all the memory is used) </span>
         </li>
         <li class="itemize"><span class="uwave">slide=0</span> <span class="uwave">is forced (by an argument or safe mode) </span>
         </li>
         <li class="itemize"><span class="uwave">KASLR (slide) is unsupported (this is macOS 10.7 or older) </span></li></ul>
     <!--l. 1500--><p class="noindent" ><span class="uwave">This quirk requires </span><span class="uwave">ProvideCustomSlide</span> <span class="uwave">to also be enabled and generally needs </span>AvoidRuntimeDefrag <span class="uwave">to work correctly.
     Hibernation is not supported when booting with a relocation block (but relocation block is not always used when the
     quirk is enabled). </span>
     </p><!--l. 1506--><p class="noindent" ><span class="uwave">Note</span><span class="uwave">: While this quirk is required to run older macOS versions on platforms with used lower memory it is not
     compatible with some hardware and macOS 11. In this case you may try to use </span><span class="uwave">EnableSafeModeSlide</span> <span class="uwave">instead.
     </span>
     </p></li>
     <li 
  class="enumerate" id="x1-26004x2"><span class="uwave">AvoidRuntimeDefrag</span><br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Protect from boot.efi runtime memory defragmentation.
     <!--l. 1518--><p class="noindent" >This option fixes UEFI runtime services (date, time, NVRAM, power control, etc.) support on firmware that uses SMM
     backing for select services such as variable storage. SMM may try to access physical addresses, but they get moved by
     boot.efi.
     </p><!--l. 1522--><p class="noindent" >Note: Most types of firmware, apart from Apple and VMware, need this quirk.
     </p></li>
     <li 
  class="enumerate" id="x1-26006x3">DevirtualiseMmio<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Remove runtime attribute from select MMIO regions.
                                                                                                  
                                                                                                  
     
     
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
                                                                                                  
                                                                                                  
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
                                
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
       
      
     
     
      
     
                                                                                                  
                                                                                                  
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     </body>
</html>