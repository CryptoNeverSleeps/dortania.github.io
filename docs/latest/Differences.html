<!DOCTYPE html> 
<html lang="en-US" xml:lang="en-US" > 
<head><title>Differences</title> 
<meta  charset="utf-8" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<link rel="stylesheet" type="text/css" href="Differences.css" /> 
<meta name="src" content="Differences.tex" /> 
<link rel="stylesheet" type="text/css" href="../main.css" /></head><body 
><div class="center" 
>
<!--l. 137--><p class="noindent" >
</p><!--l. 144--><p class="noindent" > <img 
src="Logos/Logo-.png" alt="PIC"  
width="160" height="160"  />
</p><!--l. 148--><p class="noindent" >OpenCore
</p><!--l. 152--><p class="noindent" >Reference Manual (0.6<span class="sout">.0</span><span class="uwave">.1</span>)
</p><!--l. 156--><p class="noindent" >[2020.08.08]
</p><!--l. 164--><p class="noindent" >Copyright ©2018-2020 vit9696
</p>
</div>
                                                                                                  
                                                                                                  
     of nesting conditionals.
     </li>
     <li class="itemize">Use EFIAPI, force UEFI calling convention, only in protocols, external callbacks between modules, and functions
     with variadic arguments.
     </li>
     <li class="itemize">Provide inline documentation to every added function, at least describing its inputs, outputs, precondition,
     postcondition, and giving a brief description.
     </li>
     <li class="itemize">Do not use RETURN_STATUS. Assume EFI_STATUS to be a matching superset that is to be always used when
     BOOLEAN is not enough.
     </li>
     <li class="itemize">Security violations should halt the system or cause a forced reboot.</li></ul>
<!--l. 788--><p class="noindent" >Codestyle. The codebase follows <a 
href="https://github.com/tianocore/tianocore.github.io/wiki/Code-Style-C" >EDK II codestyle</a> with few changes and clarifications. </p>
     <ul class="itemize1">
     <li class="itemize">Write inline documentation for the functions and variables only once: in headers, where a header prototype is
     available, and inline for static variables and functions.
     </li>
     <li class="itemize">Use line length of 120 characters or less, preferably 100 characters.
     </li>
     <li class="itemize">Use spaces after casts, e.g. (VOID *)(UINTN) Variable.
     </li>
     <li class="itemize">Use SPDX license headers as shown in <a 
href="https://github.com/acidanthera/bugtracker/issues/483" >acidanthera/bugtracker#483</a>.</li></ul>
<a 
 id="x1-12001r15"></a>
<h4 class="subsectionHead"><span class="titlemark">3.5   </span> <a 
 id="x1-130005"></a>Debugging</h4>
<!--l. 803--><p class="noindent" >The codebase incorporates EDK II debugging and few custom features to improve the experience. </p>
     <ul class="itemize1">
     <li class="itemize">Use module prefixes, 2-5 letters followed by a colon (:), for debug messages. For OpenCorePkg use OC:, for
     libraries and drivers use their own unique prefixes.
     </li>
     <li class="itemize">Do not use dots (.) in the end of debug messages and separate EFI_STATUS, printed by %r, with a hyphen (e.g.
     OCRAM: Allocation of %u bytes failed - %r\n).
     </li>
     <li class="itemize">Use DEBUG_CODE_BEGIN () and DEBUG_CODE_END () constructions to guard debug checks that may potentially
     reduce the performance of release builds and are otherwise unnecessary.
     </li>
     <li class="itemize">Use DEBUG macro to print debug messages during normal functioning, and RUNTIME_DEBUG for debugging after
     EXIT_BOOT_SERVICES.
     </li>
     <li class="itemize">Use DEBUG_VERBOSE debug level to leave debug messages for future debugging of the code, which are currently
     not necessary. By default DEBUG_VERBOSE messages are ignored even in DEBUG builds.
     </li>
     <li class="itemize">Use DEBUG_INFO debug level for all non critical messages (including errors) and DEBUG_BULK_INFO for extensive
     messages that should not appear in NVRAM log that is heavily limited in size. These messages are ignored in
     RELEASE builds.
     </li>
     <li class="itemize">Use DEBUG_ERROR to print critical human visible messages that may potentially halt the boot process, and
     DEBUG_WARN for all other human visible errors, RELEASE builds included.</li></ul>
<!--l. 823--><p class="noindent" >When trying to find the problematic change it is useful to rely on <a 
href="https://git-scm.com/docs/git-bisect" >git-bisect</a> functionality. <span class="uwave">There also are some unnoficial
resources that provide per-commit binary builds of OpenCore, like </span><a 
href="https://dortania.github.io/builds" >Dortania</a><span class="uwave">. </span>
<a 
 id="x1-13001r9"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">4   </span> <a 
 id="x1-140004"></a>ACPI</h3>
<a 
 id="x1-14001r16"></a>
                                                                                                  
                                                                                                  
     following actions are considered:
</p>
         <ul class="itemize1">
         <li class="itemize">Default — this is the default option, and it lets OpenCore built-in boot picker to loads the default boot
         option as specified in <a 
href="https://support.apple.com/HT202796" >Startup Disk</a> preference pane.
         </li>
         <li class="itemize">ShowPicker — this option forces picker to show. Normally it can be achieved by holding OPT key during
         boot. Setting ShowPicker to true will make ShowPicker the default option.
         </li>
         <li class="itemize">ResetNvram —  this  option  performs  select  UEFI  variable  erase  and  is  normally  achieved  by  holding
         CMD+OPT+P+R key combination during boot. Another way to erase UEFI variables is to choose Reset NVRAM
         in the picker. This option requires AllowNvramReset to be set to true.
         </li>
         <li class="itemize">BootApple — this options performs booting to the first found Apple operating system unless the default
         chosen operating system is already made by Apple. Hold X key to choose this option.
         </li>
         <li class="itemize">BootAppleRecovery — this option performs booting to Apple operating system recovery. Either the one
         related to the default chosen operating system, or first found in case default chosen operating system is not
         made by Apple or has no recovery. Hold CMD+R key combination to choose this option.</li></ul>
     <!--l. 2712--><p class="noindent" >Note 1: Activated KeySupport, OpenUsbKbDxe, or similar driver is required for key handling to work. On many firmwares
     it is not possible to get all the keys function.
     </p><!--l. 2715--><p class="noindent" >Note 2: In addition to OPT OpenCore supports Escape key to display picker when ShowPicker is disabled. This key exists
     for Apple picker mode and for firmwares with PS/2 keyboards that fail to report held OPT key and require continual
     presses of Escape key to enter the boot menu.
     </p><!--l. 2720--><p class="noindent" >Note 3: On Macs with problematic GOP it may be difficult to access Apple BootPicker. <span class="sout">To </span><span class="uwave">BootKicker</span> <span class="uwave">utility can be
     blessed to </span>workaround this problem even without loading OpenCore<span class="uwave">. On some Macs </span>BootKicker <span class="sout">utility can be
     blessed</span><span class="uwave">will not run from OpenCore</span>.
</p>
     </li></ol>
<a 
 id="x1-41021r44"></a>
<h4 class="subsectionHead"><span class="titlemark">8.4   </span> <a 
 id="x1-420004"></a>Debug Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-42002x1">AppleDebug<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Enable boot.efi debug log saving to OpenCore log.
     <!--l. 2736--><p class="noindent" >Note: This option only applies to 10.15.4 and newer.
     </p></li>
     <li 
  class="enumerate" id="x1-42004x2">ApplePanic<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Save macOS kernel panic to OpenCore root partition.
     <!--l. 2744--><p class="noindent" >The file is saved as panic-YYYY-MM-DD-HHMMSS.txt. It is strongly recommended to have keepsyms=1 boot
     argument to see debug symbols in the panic log. In case it was not present kpdescribe.sh utility (bundled with
     OpenCore) may be used to partially recover the stacktrace.
     </p><!--l. 2749--><p class="noindent" >Development  and  debug  kernels  produce  more  helpful  kernel  panics.  Consider  downloading  and  installing
     KernelDebugKit from <a 
href="https://developer.apple.com" >developer.apple.com</a> when debugging a problem. To activate a development kernel you
     will need to add a kcsuffix=development boot argument. Use uname -a command to ensure that your current
     loaded kernel is a development (or a debug) kernel.
     </p><!--l. 2756--><p class="noindent" >In case OpenCore kernel panic saving mechanism was not used, kernel panics may still be found in <br 
class="newline" />/Library/Logs/DiagnosticReports directory. Starting with macOS Catalina kernel panics are stored in JSON
                                                                                                  
                                                                                                  
     </li></ol>
<a 
 id="x1-42022r45"></a>
<h4 class="subsectionHead"><span class="titlemark">8.5   </span> <a 
 id="x1-430005"></a>Security Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-43002x1">AllowNvramReset<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Allow CMD+OPT+P+R handling and enable showing NVRAM Reset entry in boot picker.
     <!--l. 2969--><p class="noindent" >Note 1: It is known that some Lenovo laptops have a firmware bug, which makes them unbootable after performing
     NVRAM reset. See <a 
href="https://github.com/acidanthera/bugtracker/issues/995" >acidanthera/bugtracker#995</a> for more details.
     </p><!--l. 2974--><p class="noindent" >Note 2: Resetting NVRAM will also erase all the boot options otherwise not backed up with bless (e.g. Linux).
     </p></li>
     <li 
  class="enumerate" id="x1-43004x2">AllowSetDefault<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Allow CTRL+Enter and CTRL+Index handling to set the default boot option in boot picker.
     </li>
     <li 
  class="enumerate" id="x1-43006x3">AuthRestart<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Enable VirtualSMC-compatible authenticated restart.
     <!--l. 2990--><p class="noindent" >Authenticated restart is a way to reboot FileVault 2 enabled macOS without entering the password. To perform
     authenticated restart one can use a dedicated terminal command: sudo fdesetup authrestart. It is also used
     when installing operating system updates.
     </p><!--l. 2995--><p class="noindent" >VirtualSMC performs authenticated restart by saving disk encryption key split in NVRAM and RTC, which
     despite being removed as soon as OpenCore starts, may be considered a security risk and thus is optional.
     </p></li>
     <li 
  class="enumerate" id="x1-43008x4">BootProtect<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: None<br 
class="newline" />Description: Attempt to provide bootloader persistence.
     <!--l. 3005--><p class="noindent" >Valid values:
</p>
         <ul class="itemize1">
         <li class="itemize">None — do nothing.
         </li>
         <li class="itemize">Bootstrap — create or update top-priority \EFI\OC\Bootstrap\Bootstrap.efi boot option (Boot9696)
         in UEFI variable storage at bootloader startup. For this option to work RequestBootVarRouting is required
         to be enabled.</li></ul>
     <!--l. 3016--><p class="noindent" >This option provides integration with third-party operating system installation and upgrade at the times they overwrite
     \EFI\BOOT\BOOTx64.efi file. By creating a custom option in Bootstrap mode this file path becomes no longer used for
     bootstraping OpenCore.
     </p><!--l. 3021--><p class="noindent" >Note 1: Some firmewares may have broken NVRAM, no boot option support, or various other incompatibilities of any
     kind. While unlikely, the use of this option may even cause boot failure. Use at your own risk on boards known to be
     compatible.
     </p><!--l. 3025--><p class="noindent" >Note 2: Be warned that while NVRAM reset executed from OpenCore should not erase the boot option created in
     Bootstrap, executing NVRAM reset prior to loading OpenCore will remove it.
     </p></li>
     <li 
  class="enumerate" id="x1-43010x5"><span class="uwave">DmgLoading</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist string</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: </span><span class="uwave">Signed</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Attempt to provide bootloader persistence. </span>
     <!--l. 3037--><p class="noindent" ><span class="uwave">Valid values: </span>
</p>
         <ul class="itemize1">
         <li class="itemize"><span class="uwave">Disabled</span> <span class="uwave">— loading DMG images will fail. </span>
         </li>
         <li class="itemize"><span class="uwave">Signed</span> <span class="uwave">— only Apple-signed DMG images will load. </span>
         </li>
         <li class="itemize"><span class="uwave">Any</span> <span class="uwave">— any DMG images will mount as normal filesystems. </span></li></ul>
     </li>
     <li 
  class="enumerate" id="x1-43012x6">ExposeSensitiveData<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0x6<br 
class="newline" />Description: Sensitive data exposure bitmask (sum) to operating system.
         <ul class="itemize1">
         <li class="itemize">0x01 — Expose printable booter path as an UEFI variable.
         </li>
         <li class="itemize">0x02 — Expose OpenCore version as an UEFI variable.
         </li>
         <li class="itemize">0x04 — Expose OpenCore version in boot picker menu title.
         </li>
         <li class="itemize">0x08 — Expose OEM information as a set of UEFI variables.</li></ul>
     <!--l. 3061--><p class="noindent" >Exposed booter path points to OpenCore.efi or its booter depending on the load order. To obtain booter path use the
     following command in macOS: </p><!--l. 3063-->
<a 
 id="x1-430116"></a>
     <div class="lstlisting" id="listing-8"><span class="label"><a 
 id="x1-43013r1"></a></span>nvram 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:boot-path
     
     </div>
     <!--l. 3067--><p class="noindent" >To use booter path for mounting booter volume use the following command in macOS: </p><!--l. 3068-->
     <div class="lstlisting" id="listing-9"><span class="label"><a 
 id="x1-43014r1"></a></span>u=$(nvram 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:boot-path | sed &#x0027;s/.*GPT,\([^,]*\),.*/\1/&#x0027;); \ <br /><span class="label"><a 
 id="x1-43015r2"></a></span>  if [ &#x0022;$u&#x0022; != &#x0022;&#x0022; ]; then sudo diskutil mount $u ; fi
     
     </div>
     <!--l. 3073--><p class="noindent" >To obtain OpenCore version use the following command in macOS: </p><!--l. 3074-->
     <div class="lstlisting" id="listing-10"><span class="label"><a 
 id="x1-43016r1"></a></span>nvram 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:opencore-version
     
     </div>
     <!--l. 3078--><p class="noindent" >To obtain OEM information use the following commands in macOS: </p><!--l. 3079-->
     <div class="lstlisting" id="listing-11"><span class="label"><a 
 id="x1-43017r1"></a></span>nvram 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:oem-product # SMBIOS Type1 ProductName <br /><span class="label"><a 
 id="x1-43018r2"></a></span>nvram 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:oem-vendor  # SMBIOS Type2 Manufacturer <br /><span class="label"><a 
 id="x1-43019r3"></a></span>nvram 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:oem-board   # SMBIOS Type2 ProductName
     
     </div>
                                                                                                  


</body>
</html>