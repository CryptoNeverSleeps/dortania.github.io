<!DOCTYPE html> 
<html lang="en-US" xml:lang="en-US" > 
<head><title>Differences</title> 
<meta  charset="utf-8" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<link rel="stylesheet" type="text/css" href="Differences.css" /> 
<meta name="src" content="Differences.tex" /> 
<link rel="stylesheet" type="text/css" href="../main.css" /></head><body 
><div class="center" 
>
<!--l. 142--><p class="noindent" >
</p><!--l. 149--><p class="noindent" > <img 
src="Logos/Logo-.png" alt="PIC"  
width="160" height="160"  />
</p><!--l. 153--><p class="noindent" >OpenCore
</p><!--l. 157--><p class="noindent" >Reference Manual (0.6<span class="sout">.3</span><span class="uwave">.4</span>)
</p><!--l. 161--><p class="noindent" >[2020.11.29]
</p><!--l. 169--><p class="noindent" >Copyright ©2018-2020 vit9696
</p>
</div>
                                                                                                  
                                                                                                  
     loaded by the firmware by default according to UEFI specification, and Bootstrap.efi can be registered as a
     custom option to let OpenCore coexist with operating systems using BOOTx64.efi as their own loaders (e.g.
     Windows), see BootProtect for more details.
     </li>
     <li class="itemize">boot <br 
class="newline" />Duet bootstrap loader, which initialises UEFI environment on legacy BIOS firmware and loads OpenCore.efi
     similarly to other bootstrap loaders. Modern Duet bootstrap loader will default to OpenCore.efi on the same
     partition when present.
     </li>
     <li class="itemize">ACPI <br 
class="newline" />Directory used for storing supplemental ACPI information for ?? section.
     </li>
     <li class="itemize">Drivers <br 
class="newline" />Directory used for storing supplemental UEFI drivers for ?? section.
     </li>
     <li class="itemize">Kexts <br 
class="newline" />Directory used for storing supplemental kernel information for ?? section.
     </li>
     <li class="itemize">Resources <br 
class="newline" />Directory used for storing media resources, such as audio files for screen reader support. See ?? section for more
     details. This directory also contains image files for graphical user interface. See ?? section for more details.
     </li>
     <li class="itemize">Tools <br 
class="newline" />Directory used for storing supplemental tools.
     </li>
     <li class="itemize">OpenCore.efi <br 
class="newline" />Main booter driver responsible for operating system loading. <span class="uwave">The directory </span><span class="uwave">OpenCore.efi</span> <span class="uwave">resides is called the
     </span><span class="uwave">root directory</span><span class="uwave">. By default </span><span class="uwave">root directory</span> <span class="uwave">is set to </span><span class="uwave">EFI\OC</span><span class="uwave">, however, when launching </span><span class="uwave">OpenCore.efi</span> <span class="uwave">directly
     or through </span><span class="uwave">Bootstrap.efi</span><span class="uwave">, other directories containing </span><span class="uwave">OpenCore.efi</span> <span class="uwave">can also be supported. </span>
     </li>
     <li class="itemize">config.plist <br 
class="newline" />OC Config.
     </li>
     <li class="itemize">vault.plist <br 
class="newline" />Hashes for all files potentially loadable by OC Config.
     </li>
     <li class="itemize">vault.sig <br 
class="newline" />Signature for vault.plist.
     </li>
     <li class="itemize">SysReport <br 
class="newline" />Directory containing system reports generated by SysReport option.
     </li>
     <li class="itemize">nvram.plist <br 
class="newline" />OpenCore variable import file.
     </li>
     <li class="itemize">opencore-YYYY-MM-DD-HHMMSS.txt <br 
class="newline" />OpenCore log file.
     </li>
     <li class="itemize">panic-YYYY-MM-DD-HHMMSS.txt <br 
class="newline" />Kernel panic log file.</li></ul>
<!--l. 624--><p class="noindent" >Note: It is not guaranteed that paths longer than OC_STORAGE_SAFE_PATH_MAX (128 characters including <br 
class="newline" />0-terminator) will be accessible within OpenCore.
<a 
 id="x1-9001r10"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">3.2   </span> <a 
 id="x1-100002"></a>Installation and Upgrade</h4>
<!--l. 630--><p class="noindent" >To install OpenCore reflect the ?? described in the previous section on a EFI volume of a GPT partition. While corresponding
                                                                                                  
                                                                                                  
<!--l. 1299--><p class="noindent" >When debugging sleep issues Power Nap and automatic power off may be (temporarily) disabled, which appear to sometimes
cause wake to black screen or boot loop issues on older platforms. The particular issues may vary, but in general ACPI tables
should be looked up first. Here is an example of a bug found in some <a 
href="http://www.insanelymac.com/forum/topic/329624-need-cmos-reset-after-sleep-only-after-login/#entry2534645" >Z68 motherboards</a>. To turn Power Nap and the others off
run the following commands in Terminal: </p><!--l. 1305-->
<div class="lstlisting" id="listing-3"><span class="label"><a 
 id="x1-22001r1"></a></span>sudo pmset autopoweroff 0 <br /><span class="label"><a 
 id="x1-22002r2"></a></span>sudo pmset powernap 0 <br /><span class="label"><a 
 id="x1-22003r3"></a></span>sudo pmset standby 0
</div>
<!--l. 1311--><p class="noindent" >Note: These settings may reset at hardware change and in certain other circumstances. To view their current state use pmset
-g command in Terminal.
<a 
 id="x1-22004r25"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">5.2   </span> <a 
 id="x1-230002"></a>Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-23002x1">MmioWhitelist<br 
class="newline" />Type: plist array<br 
class="newline" />Description: Designed to be filled with plist dict values, describing addresses critical for particular firmware
     functioning when DevirtualiseMmio quirk is in use. See <a 
href="#x1-240003">MmioWhitelist Properties</a> section below.
     </li>
     <li 
  class="enumerate" id="x1-23004x2">Quirks<br 
class="newline" />Type: plist dict<br 
class="newline" />Description: Apply individual booter quirks described in <a 
href="#x1-250004">Quirks Properties</a> section below.
     </li></ol>
<a 
 id="x1-23005r26"></a>
<h4 class="subsectionHead"><span class="titlemark">5.3   </span> <a 
 id="x1-240003"></a>MmioWhitelist Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-24002x1">Address<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: Exceptional MMIO address, which memory descriptor should be left virtualised (unchanged) by
     DevirtualiseMmio. This means that the firmware will be able to directly communicate with this memory region
     during operating system functioning, because the region this value is in will be assigned a virtual address.
     <!--l. 1347--><p class="noindent" >The  addresses  written  here  must  be  part  of  the  memory  map,  have  EfiMemoryMappedIO type  and
     EFI_MEMORY_RUNTIME attribute (highest bit) set. To find the list of the candidates the debug log can be used.
     </p></li>
     <li 
  class="enumerate" id="x1-24004x2">Comment<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Empty string<br 
class="newline" />Description: Arbitrary ASCII string used to provide human readable reference for the entry. It is implementation
     defined whether this value is used.
     </li>
     <li 
  class="enumerate" id="x1-24006x3">Enabled<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: This address will be devirtualised unless set to true.
     </li></ol>
<a 
 id="x1-24007r27"></a>
<h4 class="subsectionHead"><span class="titlemark">5.4   </span> <a 
 id="x1-250004"></a>Quirks Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-25002x1"><span class="uwave">AllowRelocationBlock</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist boolean</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: </span><span class="uwave">false</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Allows booting macOS through a relocation block. </span>
     <!--l. 1384--><p class="noindent" ><span class="uwave">Relocation block is a scratch buffer allocated in lower 4 GB to be used for loading the kernel and related structures
     by EfiBoot on firmwares where lower memory is otherwise occupied by the (assumed to be) non-runtime data.
     Right before kernel startup the relocation block is copied back to lower addresses. Similarly all the other addresses
     pointing to relocation block are also carefully adjusted. Relocation block can be used when: </span>
</p>
         <ul class="itemize1">
         <li class="itemize"><span class="uwave">No better slide exists (all the memory is used) </span>
         </li>
         <li class="itemize"><span class="uwave">slide=0</span> <span class="uwave">is forced (by an argument or safe mode) </span>
         </li>
         <li class="itemize"><span class="uwave">KASLR (slide) is unsupported (this is macOS 10.7 or older) </span></li></ul>
     <!--l. 1393--><p class="noindent" ><span class="uwave">This quirk requires </span><span class="uwave">ProvideCustomSlide</span> <span class="uwave">to also be enabled and generally needs </span>AvoidRuntimeDefrag <span class="uwave">to work correctly.
     Hibernation is not supported when booting with a relocation block (but relocation block is not always used when the
     quirk is enabled). </span>
     </p><!--l. 1399--><p class="noindent" ><span class="uwave">Note</span><span class="uwave">: While this quirk is required to run older macOS versions on platforms with used lower memory it is not
     compatible with some hardware and macOS 11. In this case you may try to use </span><span class="uwave">EnableSafeModeSlide</span> <span class="uwave">instead.
     </span>
     </p></li>
     <li 
  class="enumerate" id="x1-25004x2"><span class="uwave">AvoidRuntimeDefrag</span><br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Protect from boot.efi runtime memory defragmentation.
     <!--l. 1411--><p class="noindent" >This option fixes UEFI runtime services (date, time, NVRAM, power control, etc.) support on firmware that uses SMM
     backing for select services such as variable storage. SMM may try to access physical addresses, but they get moved by
     boot.efi.
     </p><!--l. 1415--><p class="noindent" >Note: Most types of firmware, apart from Apple and VMware, need this quirk.
     </p></li>
     <li 
  class="enumerate" id="x1-25006x3">DevirtualiseMmio<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Remove runtime attribute from select MMIO regions.
     <!--l. 1423--><p class="noindent" >This option reduces stolen memory footprint from the memory map by removing runtime bit for known memory regions.
     This quirk may result in the increase of KASLR slides available, but is not necessarily compatible with the target board
     without additional measures. In general this frees from 64 to 256 megabytes of memory (present in the debug log), and
     on some platforms it is the only way to boot macOS, which otherwise fails with allocation error at bootloader
     stage.
     </p><!--l. 1431--><p class="noindent" >This option is generally useful on all types of firmware, except some very old ones such as Sandy Bridge. On some types
     of firmware, a list of addresses that need virtual addresses for proper NVRAM and hibernation functionality may be
     required. Use the MmioWhitelist section for this.
     </p></li>
     <li 
  class="enumerate" id="x1-25008x4">DisableSingleUser<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Disable single user mode.
     <!--l. 1442--><p class="noindent" >This is a security option that restricts the activation of single user mode by ignoring CMD+S hotkey and -s boot
     argument. The behaviour with this quirk enabled is supposed to match T2-based model behaviour. Refer to <a 
href="https://web.archive.org/web/20200517125051/https://support.apple.com/en-us/HT201573" >this archived
     article</a> to understand how to use single user mode with this quirk enabled.
     </p></li>
                                                                                                  
                                                                                                  
     
     
     
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
                                                                                                  
                                                                                                  
     <div class="center" 
>
<!--l. 2689--><p class="noindent" >
</p>
<div class="tabular"> <table id="TBL-3" class="tabular" 
 
><colgroup id="TBL-3-1g"><col 
id="TBL-3-1" /></colgroup><colgroup id="TBL-3-2g"><col 
id="TBL-3-2" /></colgroup><colgroup id="TBL-3-3g"><col 
id="TBL-3-3" /></colgroup><colgroup id="TBL-3-4g"><col 
id="TBL-3-4" /></colgroup><colgroup id="TBL-3-5g"><col 
id="TBL-3-5" /></colgroup><colgroup id="TBL-3-6g"><col 
id="TBL-3-6" /></colgroup><colgroup id="TBL-3-7g"><col 
id="TBL-3-7" /></colgroup><colgroup id="TBL-3-8g"><col 
id="TBL-3-8" /></colgroup><tr 
class="hline"><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-1-"><td  style="white-space:normal; text-align:left;" id="TBL-3-1-1"  
class="td 1"><!--l. 2692--><p class="noindent" >macOS   </p></td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-1-2"  
class="td11">i386 NC</td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-1-3"  
class="td11">i386 MK</td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-1-4"  
class="td11">i386 PK</td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-1-5"  
class="td11">x86_64 NC</td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-1-6"  
class="td11">x86_64 MK</td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-1-7"  
class="td11">x86_64 PK</td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-1-8"  
class="td11">x86_64 KC</td>
</tr><tr 
class="hline"><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-2-"><td  style="white-space:normal; text-align:left;" id="TBL-3-2-1"  
class="td11"><!--l. 2694--><p class="noindent" >10.4          </p></td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-2-2"  
class="td11">  YES   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-2-3"  
class="td11">YES (V1)</td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-2-4"  
class="td11"> NO (V1) </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-2-5"  
class="td11">     —       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-2-6"  
class="td11">     —        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-2-7"  
class="td11">     —       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-2-8"  
class="td11">     —       </td>
</tr><tr 
class="hline"><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-3-"><td  style="white-space:normal; text-align:left;" id="TBL-3-3-1"  
class="td11"><!--l. 2696--><p class="noindent" >10.5          </p></td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-3-2"  
class="td11">  YES   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-3-3"  
class="td11">YES (V1)</td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-3-4"  
class="td11"> NO (V1) </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-3-5"  
class="td11">     —       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-3-6"  
class="td11">     —        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-3-7"  
class="td11">     —       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-3-8"  
class="td11">     —       </td>
</tr><tr 
class="hline"><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-4-"><td  style="white-space:normal; text-align:left;" id="TBL-3-4-1"  
class="td11"><!--l. 2698--><p class="noindent" >10.6          </p></td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-4-2"  
class="td11">  YES   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-4-3"  
class="td11">YES (V2)</td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-4-4"  
class="td11">YES (V2)</td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-4-5"  
class="td11">    YES      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-4-6"  
class="td11">  YES (V2)   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-4-7"  
class="td11"> YES (V2)  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-4-8"  
class="td11">     —       </td>
</tr><tr 
class="hline"><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-5-"><td  style="white-space:normal; text-align:left;" id="TBL-3-5-1"  
class="td11"><!--l. 2700--><p class="noindent" >10.7          </p></td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-5-2"  
class="td11">  YES   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-5-3"  
class="td11">   —     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-5-4"  
class="td11">YES (V3)</td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-5-5"  
class="td11">    YES      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-5-6"  
class="td11">     —        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-5-7"  
class="td11"> YES (V3)  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-5-8"  
class="td11">     —       </td>
</tr><tr 
class="hline"><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-6-"><td  style="white-space:normal; text-align:left;" id="TBL-3-6-1"  
class="td11"><!--l. 2702--><p class="noindent" >10.8-10.9    </p></td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-6-2"  
class="td11">   —     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-6-3"  
class="td11">   —     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-6-4"  
class="td11">   —     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-6-5"  
class="td11">    YES      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-6-6"  
class="td11">     —        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-6-7"  
class="td11"> YES (V3)  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-6-8"  
class="td11">     —       </td>
</tr><tr 
class="hline"><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-7-"><td  style="white-space:normal; text-align:left;" id="TBL-3-7-1"  
class="td11"><!--l. 2704--><p class="noindent" >10.10-10.15 </p></td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-7-2"  
class="td11">   —     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-7-3"  
class="td11">   —     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-7-4"  
class="td11">   —     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-7-5"  
class="td11">     —       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-7-6"  
class="td11">     —        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-7-7"  
class="td11"> YES (V3)  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-7-8"  
class="td11">     —       </td>
</tr><tr 
class="hline"><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-8-"><td  style="white-space:normal; text-align:left;" id="TBL-3-8-1"  
class="td11"><!--l. 2706--><p class="noindent" ><span class="sout">11.0</span><span class="uwave">11</span>+     </p></td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-8-2"  
class="td11">   —     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-8-3"  
class="td11">   —     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-8-4"  
class="td11">   —     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-8-5"  
class="td11">     —       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-8-6"  
class="td11">     —        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-8-7"  
class="td11"> YES (V3)  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-8-8"  
class="td11">    YES      </td>
</tr><tr 
class="hline"><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-9-"><td  style="white-space:normal; text-align:left;" id="TBL-3-9-1"  
class="td11">          </td>
</tr></table></div></div>
     <!--l. 2711--><p class="noindent" >Note: First version (V1) of 32-bit prelinkedkernel is unsupported due to kext symbol tables being corrupted by the
     tools. On these versions Auto will block prelinkedkernel booting. This also makes keepsyms=1 for kext frames broken
     on these systems.
</p>
     </li></ol>
<a 
 id="x1-39021r33"></a>
<h3 class="sectionHead"><span class="titlemark">8   </span> <a 
 id="x1-400008"></a>Misc</h3>
<a 
 id="x1-40001r42"></a>
<h4 class="subsectionHead"><span class="titlemark">8.1   </span> <a 
 id="x1-410001"></a>Introduction</h4>
<!--l. 2723--><p class="noindent" >This section contains miscellaneous configuration affecting OpenCore operating system loading behaviour as well as other
entries, which do not go to any other section.
</p><!--l. 2726--><p class="noindent" >OpenCore tries to follow “bless” model also known as “Apple Boot Policy”. The primary specialty of “bless” model is to
allow embedding boot options within the file system (and be accessible through a specialised driver) as well as
supporting a broader range of predefined boot paths compared to the removable media list found in the UEFI
specification.
</p><!--l. 2731--><p class="noindent" >Each partition will only be used for booting when it corresponds to “Scan policy”: a set of restrictions to only use partitions
with specific file systems and from specific device types. Scan policy behaviour is discussed in ScanPolicy property
description.
</p><!--l. 2735--><p class="noindent" >Scan process starts with obtaining all the partitions filtered with “Scan policy”. Each partition may produce multiple primary
and alternate options. Primary options describe operating systems installed on this media. Alternate options describe recovery
options for the operating systems on the media. It is possible for alternate options to exist without primary options and vice
versa. Be warned that the options may not necessarily describe the operating systems on the same partition. Each primary and
alternate option can be an auxiliary option or not, refer to HideAuxiliary for more details. Algorithm to determine boot
options behaves as follows:
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-41002x1">Obtain all available partition handles filtered by “Scan policy” (and driver availability).
     </li>
     <li 
  class="enumerate" id="x1-41004x2">Obtain all available boot options from BootOrder UEFI variable.
     </li>
     <li 
  class="enumerate" id="x1-41006x3">For each found boot option:
         <ul class="itemize1">
         <li class="itemize">Retrieve device path of the boot option.
         </li>
         <li class="itemize">Perform fixups (e.g. NVMe subtype correction) and expansion (e.g. for Boot Camp) of the device path.
         </li>
         <li class="itemize">Obtain device handle by locating device path of the resulting device path (ignore it on failure).
         </li>
         <li class="itemize">Find device handle in the list of partition handles (ignore it if missing).
         </li>
         <li class="itemize">For disk device paths (not specifying a bootloader) execute “bless” (may return &#x003E; 1 entry).
                                                                                                  
                                                                                                  
     </p><!--l. 3399--><p class="noindent" >Note 2: Resetting NVRAM will also erase all the boot options otherwise not backed up with bless (e.g. Linux).
     </p></li>
     <li 
  class="enumerate" id="x1-45004x2">AllowSetDefault<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Allow CTRL+Enter and CTRL+Index handling to set the default boot option in boot picker.
     </li>
     <li 
  class="enumerate" id="x1-45006x3">ApECID<br 
class="newline" />Type: plist integer, 64 bit<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: Apple Enclave Identifier.
     <!--l. 3415--><p class="noindent" >Setting this value to any non-zero 64-bit integer will allow using personalised Apple Secure Boot identifiers. To
     use this setting, make sure to generate a random 64-bit number with a cryptographically secure random number
     generator. As an alternative, first 8 bytes of SystemUUID can be used for ApECID, this is found in macOS <span class="sout">11.0
     </span><span class="uwave">11 </span>for Macs without the T2 chip.
     </p><!--l. 3422--><p class="noindent" >With this value set and SecureBootModel valid and not Disabled it is possible to achieve <a 
href="https://support.apple.com/en-us/HT208330" >Full Security</a> of
     Apple Secure Boot.
     </p><!--l. 3427--><p class="noindent" >To start using personalised Apple Secure Boot, the operating system will have to be reinstalled or personalised.
     Unless the operating system is personalised, macOS DMG recovery cannot be loaded. If DMG recovery is missing,
     it can be downloaded with macrecovery utility and put to com.apple.recovery.boot as explained in ?? section.
     Note that <a 
href="#x1-450207">DMG loading</a> needs to be set to Signed to use any DMG with Apple Secure Boot.
     </p><!--l. 3436--><p class="noindent" >To personalise an existing operating system use bless command after loading to macOS DMG recovery. Mount
     the system volume partition, unless it has already been mounted, and execute the following command:
</p>
     <!--l. 3440-->
<a 
 id="x1-450053"></a>
     <div class="lstlisting" id="listing-8"><span class="label"><a 
 id="x1-45007r1"></a></span>bless bless --folder &#x0022;/Volumes/Macintosh HD/System/Library/CoreServices&#x0022; \ <br /><span class="label"><a 
 id="x1-45008r2"></a></span>  --bootefi --personalize
     
     </div>
     <!--l. 3445--><p class="noindent" >Before macOS <span class="sout">11.0</span><span class="uwave">11</span>, which introduced a dedicated x86legacy model for models without the T2 chip, personalised
     Apple Secure Boot may not work as expected. When reinstalling the operating system, macOS Installer from macOS
     10.15 and older, will usually run out of free memory on the /var/tmp partition when trying to install macOS with the
     personalised Apple Secure Boot. Soon after downloading the macOS installer image an Unable to verify
     macOS error message will appear. To workaround this issue allocate a dedicated RAM disk of 2 MBs for
     macOS personalisation by entering the following commands in macOS recovery terminal before starting the
     installation:
</p>
     <!--l. 3456-->
     <div class="lstlisting" id="listing-9"><span class="label"><a 
 id="x1-45009r1"></a></span>disk=$(hdiutil attach -nomount ram://4096) <br /><span class="label"><a 
 id="x1-45010r2"></a></span>diskutil erasevolume HFS+ SecureBoot $disk <br /><span class="label"><a 
 id="x1-45011r3"></a></span>diskutil unmount $disk <br /><span class="label"><a 
 id="x1-45012r4"></a></span>mkdir /var/tmp/OSPersonalizationTemp <br /><span class="label"><a 
 id="x1-45013r5"></a></span>diskutil mount -mountpoint /var/tmp/OSPersonalizationTemp $disk
     
     </div>
     </li>
     <li 
  class="enumerate" id="x1-45015x4">AuthRestart<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Enable VirtualSMC-compatible authenticated restart.
     <!--l. 3470--><p class="noindent" >Authenticated restart is a way to reboot FileVault 2 enabled macOS without entering the password. A dedicated terminal
     command can be used to perform authenticated restarts: sudo fdesetup authrestart. It is also used when installing
     operating system updates.
                                                                                                  
                                                                                                  
     </p><!--l. 3474--><p class="noindent" >VirtualSMC performs authenticated restart by saving disk encryption key split in NVRAM and RTC,
     which despite being removed as soon as OpenCore starts, may be considered a security risk and thus is
     optional.
     </p></li>
     <li 
  class="enumerate" id="x1-45017x5"><span class="uwave">BlacklistAppleUpdate</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist boolean</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: </span><span class="uwave">false</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Ignore boot options trying to update Apple peripheral firmware (e.g. </span><span class="uwave">MultiUpdater.efi</span><span class="uwave">).
     </span>
     <!--l. 3486--><p class="noindent" ><span class="uwave">Note</span><span class="uwave">: This option exists due to some operating systems, namely macOS Big Sur, being </span><a 
href="https://github.com/acidanthera/bugtracker/issues/1255" >incapable</a> <span class="uwave">of disabling firmware
     updates with the NVRAM variable (</span><span class="uwave">run-efi-updater</span><span class="uwave">). </span>
     </p></li>
     <li 
  class="enumerate" id="x1-45019x6">BootProtect<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: None<br 
class="newline" />Description: Attempt to provide bootloader persistence.
     <!--l. 3497--><p class="noindent" >Valid values:
</p>
         <ul class="itemize1">
         <li class="itemize">None — do nothing.
         </li>
         <li class="itemize">Bootstrap — create or update top-priority \EFI\OC\Bootstrap\Bootstrap.efi boot option (Boot9696)
         in UEFI variable storage at bootloader startup. For this option to work RequestBootVarRouting is required
         to be enabled.
         </li>
         <li class="itemize"><span class="uwave">BootstrapShort</span><span class="uwave">— create a short boot option instead of a complete one, otherwise equivalent to </span><span class="uwave">Bootstrap</span><span class="uwave">.
         This variant is useful for some Insyde firmwares, which cannot handle full device paths. </span></li></ul>
     <!--l. 3511--><p class="noindent" >This option provides integration with third-party operating system installation and upgrade at the times they overwrite
     \EFI\BOOT\BOOTx64.efi file. By creating a custom option in Bootstrap mode this file path becomes no longer used for
     bootstrapping OpenCore.
     </p><!--l. 3516--><p class="noindent" >Note 1: Some types of firmware may have faulty NVRAM, no boot option support, or other incompatibilities. While
     unlikely, the use of this option may even cause boot failures. This option should be used without any warranty exclusively
     on the boards known to be compatible. Check <a 
href="https://github.com/acidanthera/bugtracker/issues/1222" >acidanthera/bugtracker#1222</a> for some known issues with Haswell and
     other boards.
     </p><!--l. 3522--><p class="noindent" >Note 2: Be aware that while NVRAM reset executed from OpenCore should not erase the boot option created in
     Bootstrap, executing NVRAM reset prior to loading OpenCore will remove it.
     </p></li>
     <li 
  class="enumerate" id="x1-45021x7"><a 
 id="x1-450207"></a> DmgLoading<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Signed<br 
class="newline" />Description: Define Disk Image (DMG) loading policy used for macOS Recovery.
     <!--l. 3531--><p class="noindent" >Valid values:
</p>
         <ul class="itemize1">
         <li class="itemize">Disabled — loading DMG images will fail. Disabled policy will still let macOS Recovery to load in most
         cases as there usually are boot.efi files compatible with Apple Secure Boot. Manually downloaded DMG
         images stored in com.apple.recovery.boot directories will not load, however.
         </li>
         <li class="itemize">Signed — only Apple-signed DMG images will load. Due to Apple Secure Boot design Signed policy will
         let any Apple-signed macOS Recovery to load regardless of Apple Secure Boot state, which may not always
         be desired.
                                                                                                  
                                                                                                  
         <li class="itemize">j780 — MacBookPro15,3 (May 2019) minimum macOS 10.14.5 (18F132)
         </li>
         <li class="itemize">j213 — MacBookPro15,4 (July 2019) minimum macOS 10.14.5 (18F2058)
         </li>
         <li class="itemize">j140a — MacBookAir8,2 (July 2019) minimum macOS 10.14.5 (18F2058)
         </li>
         <li class="itemize">j152f — MacBookPro16,1 (November 2019) minimum macOS 10.15.1 (19B2093)
         </li>
         <li class="itemize">j160 — MacPro7,1 (December 2019) minimum macOS 10.15.1 (19B88)
         </li>
         <li class="itemize">j230k — MacBookAir9,1 (March 2020) minimum macOS 10.15.3 (19D2064)
         </li>
         <li class="itemize">j214k — MacBookPro16,2 (May 2020) minimum macOS 10.15.4 (19E2269)
         </li>
         <li class="itemize">j223 — MacBookPro16,3 (May 2020) minimum macOS 10.15.4 (19E2265)
         </li>
         <li class="itemize">j215 — MacBookPro16,4 (June 2020) minimum macOS 10.15.5 (19F96)
         </li>
         <li class="itemize">j185 — iMac20,1 (August 2020) minimum macOS 10.15.6 (19G2005)
         </li>
         <li class="itemize">j185f — iMac20,2 (August 2020) minimum macOS 10.15.6 (19G2005)
         </li>
         <li class="itemize">x86legacy — Macs and VMs without T2 chip minimum macOS 11.0<span class="uwave">.1 (20B29)</span></li></ul>
     <!--l. 3808--><p class="noindent" >Apple Secure Boot appeared in macOS 10.13 on models with T2 chips. Since PlatformInfo and SecureBootModel are
     independent, Apple Secure Boot can be used with any SMBIOS with and without T2. Setting SecureBootModel to any
     valid value but Disabled is equivalent to <a 
href="https://support.apple.com/en-us/HT208330" >Medium Security</a> of Apple Secure Boot. The ApECID value must also be
     specified to achieve Full Security. Check ForceSecureBootScheme when using Apple Secure Boot on a virtual
     machine.
     </p><!--l. 3818--><p class="noindent" >Enabling Apple Secure Boot is more demanding to incorrect configurations, buggy macOS installations, and unsupported
     setups. Things to consider:
         </p><ol  class="enumerate2" >
         <li 
  class="enumerate" id="x1-45052x1">As with T2 Macs, unsigned kernel drivers and several signed kernel drivers, including NVIDIA Web Drivers,
         cannot be installed.
         </li>
         <li 
  class="enumerate" id="x1-45054x2">The list of cached drivers may be different, resulting in the need to change the list of Added or Forced
         kernel drivers. For example, IO80211Family cannot be injected in this case.
         </li>
         <li 
  class="enumerate" id="x1-45056x3">System volume alterations on operating systems with sealing, such as macOS 11, may result in the operating
         system being unbootable. Do not try to disable system volume encryption unless Apple Secure Boot is
         disabled.
         </li>
         <li 
  class="enumerate" id="x1-45058x4">If the platform requires certain settings, but they were not enabled, because the obvious issues did not
         trigger before, boot failure might occur. Be extra careful with IgnoreInvalidFlexRatio or HashServices.
         </li>
         <li 
  class="enumerate" id="x1-45060x5">Operating systems released before Apple Secure Boot landed (e.g. macOS 10.12 or earlier) will still boot
         until UEFI Secure Boot is enabled. This is so, because from Apple Secure Boot point they are treated as
         incompatible and are assumed to be handled by the firmware as Microsoft Windows is.
         </li>
         <li 
  class="enumerate" id="x1-45062x6">On older CPUs (e.g. before Sandy Bridge) enabling Apple Secure Boot might cause slightly slower loading
         by up to 1 second.
         </li>
         <li 
  class="enumerate" id="x1-45064x7">Since Default value will increase with time to support the latest major release operating system, it is not
         recommended to use ApECID and Default value together.
         </li>
         <li 
  class="enumerate" id="x1-45066x8"><span class="uwave">Installing macOS with Apple Secure Boot enabled is not possible while using HFS+ target volume. This
         may include HFS+ formatted drives when no spare APFS drive is available. </span></li></ol>
                                                                                                  
                                                                                                  
     <!--l. 3847--><p class="noindent" >Sometimes the already installed operating system may have outdated Apple Secure Boot manifests on the
     Preboot partition causing boot failure. If there is “OCB: Apple Secure Boot prohibits this boot entry,
     enforcing!” message, it is likely the case. When this happens, either reinstall the operating system or copy the
     manifests (files with .im4m extension, such as boot.efi.j137.im4m) from /usr/standalone/i386 to
     /Volumes/Preboot/&#x003C;UUID&#x003E;/System/Library/CoreServices. Here &#x003C;UUID&#x003E; is the system volume identifier. On
     HFS+ installations the manifests should be copied to /System/Library/CoreServices on the system
     volume.
     </p><!--l. 3857--><p class="noindent" >For more details on how to configure Apple Secure Boot with UEFI Secure Boot refer to ?? section.
</p>
     </li></ol>
<a 
 id="x1-45067r48"></a>
<h4 class="subsectionHead"><span class="titlemark">8.6   </span> <a 
 id="x1-460006"></a>Entry Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-46002x1">Arguments<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Empty string<br 
class="newline" />Description: Arbitrary ASCII string used as boot arguments (load options) of the specified entry.
     </li>
     <li 
  class="enumerate" id="x1-46004x2">Auxiliary<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: This entry will not be listed by default when HideAuxiliary is set to true.
     </li>
     <li 
  class="enumerate" id="x1-46006x3">Comment<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Empty string<br 
class="newline" />Description: Arbitrary ASCII string used to provide human readable reference for the entry. It is implementation
     defined whether this value is used.
     </li>
     <li 
  class="enumerate" id="x1-46008x4">Enabled<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: This entry will not be listed unless set to true.
     </li>
     <li 
  class="enumerate" id="x1-46010x5">Name<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Empty string<br 
class="newline" />Description: Human readable entry name displayed in boot picker.
     </li>
     <li 
  class="enumerate" id="x1-46012x6">Path<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Empty string<br 
class="newline" />Description: Entry location depending on entry type.
         <ul class="itemize1">
         <li class="itemize">Entries specify external boot options, and therefore take device paths in Path key. These values are not
         checked, thus be extremely careful. Example: PciRoot(0x0)/Pci(0x1,0x1)/.../\EFI\COOL.EFI
         </li>
         <li class="itemize">Tools specify internal boot options, which are part of bootloader vault, and therefore take file paths relative
         to OC/Tools directory. Example: OpenShell.efi.</li></ul>
     </li>
     <li 
  class="enumerate" id="x1-46014x7"><span class="uwave">RealPath</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist boolean</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: </span><span class="uwave">false</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Pass full path to the tool when launching. </span>
     <!--l. 3927--><p class="noindent" ><span class="uwave">Passing tool directory may be unsafe for tool accidentally trying to access files without checking their integrity and thus
     should generally be disabled. Reason to enable this property may include cases where tools cannot work without external
     files or may need them for better function (e.g. </span><span class="uwave">memtest86</span> <span class="uwave">for logging and configuration or </span><span class="uwave">Shell</span> <span class="uwave">for automatic script
     execution). </span>
     </p><!--l. 3931--><p class="noindent" ><span class="uwave">Note</span><span class="uwave">: This property is only valid for </span><span class="uwave">Tools</span><span class="uwave">. For </span><span class="uwave">Entries</span> <span class="uwave">this property cannot be specified and is always </span><span class="uwave">true</span><span class="uwave">.
     </span>
     </p></li>
     <li 
  class="enumerate" id="x1-46016x8"><span class="uwave">TextMode</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist boolean</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: </span><span class="uwave">false</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Run the entry in text mode instead of graphics mode. </span>
     <!--l. 3944--><p class="noindent" ><span class="uwave">This setting may be benefitial to some older tools that require text output. By default all the tools are launched in
     graphics mode. Read more about text modes in </span>?? <span class="uwave">section below. </span>
</p>
     </li></ol>
<a 
 id="x1-46017r43"></a>
<h3 class="sectionHead"><span class="titlemark">9   </span> <a 
 id="x1-470009"></a>NVRAM</h3>
<a 
 id="x1-47001r49"></a>
<h4 class="subsectionHead"><span class="titlemark">9.1   </span> <a 
 id="x1-480001"></a>Introduction</h4>
<!--l. 3953--><p class="noindent" >Has plist dict type and allows to set volatile UEFI variables commonly referred as NVRAM variables. Refer to man nvram
for more details. macOS extensively uses NVRAM variables for OS — Bootloader — Firmware intercommunication, and thus
supplying several NVRAM is required for proper macOS functioning.
</p><!--l. 3959--><p class="noindent" >Each NVRAM variable consists of its name, value, attributes (refer to UEFI specification), and its <a 
href="https://en.wikipedia.org/wiki/Universally_unique_identifier" >GUID</a>, representing which
‘section’ NVRAM variable belongs to. macOS uses several GUIDs, including but not limited to:
</p>
     <ul class="itemize1">
     <li class="itemize">4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14 (APPLE_VENDOR_VARIABLE_GUID)
     </li>
     <li class="itemize">7C436110-AB2A-4BBB-A880-FE41995C9F82 (APPLE_BOOT_VARIABLE_GUID)
     </li>
     <li class="itemize">8BE4DF61-93CA-11D2-AA0D-00E098032B8C (EFI_GLOBAL_VARIABLE_GUID)
     </li>
     <li class="itemize">4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102 (OC_VENDOR_VARIABLE_GUID)</li></ul>
<!--l. 3981--><p class="noindent" >Note: Some of the variables may be added by ?? or ?? subsections of ?? section. Please ensure that variables of this section
never collide with them, as behaviour is undefined otherwise.
</p><!--l. 3988--><p class="noindent" >For proper macOS functioning it is often required to use OC_FIRMWARE_RUNTIME protocol implementation currently offered as a
part of OpenRuntime driver. While it brings any benefits, there are certain limitations which arise depending on the
use.
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-48002x1">Not all tools may be aware of protected namespaces.<br 
class="newline" />When RequestBootVarRouting is used Boot-prefixed variable access is restricted and protected in a separate
     namespace. To access the original variables tools have to be aware of OC_FIRMWARE_RUNTIME logic.</li></ol>
<a 
 id="x1-48003r51"></a>
<h4 class="subsectionHead"><span class="titlemark">9.2   </span> <a 
 id="x1-490002"></a>Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-49002x1">Add<br 
class="newline" />Type: plist dict</body>
</html>