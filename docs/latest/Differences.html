<!DOCTYPE html> 
<html lang="en-US" xml:lang="en-US" > 
<head><title>Differences</title> 
<meta  charset="utf-8" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<link rel="stylesheet" type="text/css" href="Differences.css" /> 
<meta name="src" content="Differences.tex" /> 
<link rel="stylesheet" type="text/css" href="../main.css" /></head><body 
><div class="center" 
>
<!--l. 137--><p class="noindent" >
</p><!--l. 144--><p class="noindent" > <img 
src="Logos/Logo-.png" alt="PIC"  
width="160" height="160"  />
</p><!--l. 148--><p class="noindent" >OpenCore
</p><!--l. 152--><p class="noindent" >Reference Manual (0.6<span class="sout">.1</span><span class="uwave">.2</span>)
</p><!--l. 156--><p class="noindent" >[2020.10.03]
</p><!--l. 164--><p class="noindent" >Copyright ©2018-2020 vit9696
</p>
</div>
                                                                                                  
                                                                                                  
deviations, if found in published OpenCore releases, shall be considered documentation or implementation bugs,
and are requested to be reported through <a 
href="https://github.com/acidanthera/bugtracker" >Acidanthera Bugtracker</a>. Errata sheet is available in <a 
href="https://github.com/acidanthera/OpenCorePkg/blob/master/Docs/Errata/Errata.pdf" >OpenCorePkg
repository</a>.
</p><!--l. 183--><p class="noindent" >This document is structured as a specification, and is not meant to provide a step by step algorithm for configuring end-user
board support package (BSP). The intended audience of the document are programmers and engineers with
basic understanding of macOS internals and UEFI functioning. For these reasons this document is available
exclusively in English, and all other sources or translations of this document are unofficial and may contain
errors.
</p><!--l. 190--><p class="noindent" >Third-party articles, utilities, books, and alike may be more useful for a wider audience as they could provide guide-like
material. However, they are prone to their authors’ preferences, tastes, this document misinterpretation, and essential
obsolescence. In case <span class="sout">you use </span><span class="uwave">one uses </span>these sources, for example, <a 
href="https://dortania.github.io" >Dortania</a>’s <a 
href="https://dortania.github.io/OpenCore-Install-Guide" >OpenCore Install Guide</a> and <a 
href="https://dortania.github.io/getting-started" >related material</a>,
please ensure to follow this document for every made decision and judge its consequences.
</p><!--l. 198--><p class="noindent" >Be warned that regardless of the sources used <span class="sout">you are </span><span class="uwave">one is </span>required to fully understand every dedicated OpenCore
configuration option and concept prior to reporting any issues in <a 
href="https://github.com/acidanthera/bugtracker" >Acidanthera Bugtracker</a>.
<a 
 id="x1-2001r1"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">1.1   </span> <a 
 id="x1-30001"></a>Generic Terms</h4>
     <ul class="itemize1">
     <li class="itemize">plist —  Subset  of  ASCII  Property  List  format  written  in  XML,  also  know  as  XML  plist  format  version
     1.  Uniform  Type  Identifier  (UTI):  com.apple.property-list.  Plists  consist  of  plist objects,  which  are
     combined to form a hierarchical structure. Due to plist format not being well-defined, all the definitions of this
     document may only be applied after plist is considered valid by running plutil -lint. External references:
     https://www.apple.com/DTDs/PropertyList-1.0.dtd, man plutil.
     </li>
     <li class="itemize">plist type — plist collections (plist array, plist dictionary, plist key) and primitives (plist string,
     plist data, plist date, plist boolean, plist integer, plist real).
     </li>
     <li class="itemize">plist object — definite realisation of plist type, which may be interpreted as value.
     </li>
     <li class="itemize">plist array — array-like collection, conforms to array. Consists of zero or more plist objects.
     </li>
     <li class="itemize">plist dictionary —  map-like  (associative  array)  collection,  conforms  to  dict.  Consists  of  zero  or  more
     plist keys.
     </li>
     <li class="itemize">plist key — contains one plist object going by the name of plist key, conforms to key. Consists of printable
     7-bit ASCII characters.
     </li>
     <li class="itemize">plist string — printable 7-bit ASCII string, conforms to string.
     </li>
     <li class="itemize">plist data — base64-encoded blob, conforms to data.
     </li>
     <li class="itemize">plist date — ISO-8601 date, conforms to date, unsupported.
     </li>
     <li class="itemize">plist boolean — logical state object, which is either true (1) or false (0), conforms to true and false.
     </li>
     <li class="itemize">plist integer — possibly signed integer number in base 10, conforms to integer. Fits in 64-bit unsigned integer
     in two’s complement representation, unless a smaller signed or unsigned integral type is explicitly mentioned in
     specific plist object description.
     </li>
                                                                                                  
                                                                                                  
Properties</a> section of this document.
</p><!--l. 627--><p class="noindent" >OC config, just like any property lists can be edited with any stock textual editor (e.g. nano, vim), but specialised software
may provide better experience. On macOS the preferred GUI application is <a 
href="https://developer.apple.com/xcode" >Xcode</a>. For a lightweight cross-platform and
open-source alternative <a 
href="https://github.com/corpnewt/ProperTree" >ProperTree</a> editor can be utilised.
</p><!--l. 635--><p class="noindent" >For BIOS booting a third-party UEFI environment provider will have to be used. OpenDuetPkg is one of the known UEFI
environment providers for legacy systems. To run OpenCore on such a legacy system <span class="sout">you </span><span class="uwave">one </span>can install OpenDuetPkg with a
dedicated tool — BootInstall (bundled with OpenCore). <a 
href="https://github.com/corpnewt/gibMacOS" >Third-party utilities</a> can be used to perform this on systems different
from macOS.
</p><!--l. 642--><p class="noindent" >For upgrade purposes refer to Differences.pdf document, providing the information about the changes affecting the
configuration compared to the previous release, and Changelog.md document, containing the list of modifications across all
published updates.
<a 
 id="x1-10001r11"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">3.3   </span> <a 
 id="x1-110003"></a>Contribution</h4>
<!--l. 649--><p class="noindent" >OpenCore can be compiled as an ordinary <a 
href="https://github.com/tianocore/tianocore.github.io/wiki/EDK-II" >EDK II</a> package. Since <a 
href="https://github.com/tianocore/tianocore.github.io/wiki/UDK" >UDK</a> development was abandoned by TianoCore, OpenCore
requires the use of <a 
href="https://github.com/tianocore/tianocore.github.io/wiki/EDK-II#stable-tags" >EDK II Stable</a>. Currently supported EDK II release is hosted in <a 
href="https://github.com/acidanthera/audk" >acidanthera/audk</a>. The required patches for
the package are present in Patches directory.
</p><!--l. 658--><p class="noindent" >The only officially supported toolchain is XCODE5. Other toolchains might work, but are neither supported, nor recommended.
Contribution of clean patches is welcome. Please do follow <a 
href="https://github.com/tianocore/tianocore.github.io/wiki/Code-Style-C" >EDK II C Codestyle</a>.
</p><!--l. 663--><p class="noindent" >To compile with XCODE5, besides <a 
href="https://developer.apple.com/xcode" >Xcode</a>, one should also install <a 
href="https://www.nasm.us" >NASM</a> and <a 
href="https://github.com/acidanthera/ocbuild/tree/master/external" >MTOC</a>. The latest Xcode version is recommended
for use despite the toolchain name. Example command sequence may look as follows:
</p>
<!--l. 669-->
<a 
 id="x1-11001r1"></a>
<a 
 id="x1-11002"></a>
<div class="lstlisting" id="listing-1"><span class="label"><a 
 id="x1-11003r1"></a></span>git clone --depth=1 https://github.com/acidanthera/audk UDK <br /><span class="label"><a 
 id="x1-11004r2"></a></span>cd UDK <br /><span class="label"><a 
 id="x1-11005r3"></a></span>git submodule update --init --recommend-shallow <br /><span class="label"><a 
 id="x1-11006r4"></a></span>git clone --depth=1 https://github.com/acidanthera/OpenCorePkg <br /><span class="label"><a 
 id="x1-11007r5"></a></span>source edksetup.sh <br /><span class="label"><a 
 id="x1-11008r6"></a></span>make -C BaseTools <br /><span class="label"><a 
 id="x1-11009r7"></a></span>build -a X64 -b RELEASE -t XCODE5 -p OpenCorePkg/OpenCorePkg.dsc
<figcaption class="caption" ><span class="id">Listing 1:</span><span  
class="content">Compilation Commands</span></figcaption><!--tex4ht:label?: x1-11001r -->
</div>
<!--l. 679--><p class="noindent" >For IDE usage Xcode projects are available in the root of the repositories. Another approach could be <a 
href="https://www.sublimetext.com" >Sublime Text</a> with
<a 
href="https://niosus.github.io/EasyClangComplete" >EasyClangComplete</a> plugin. Add .clang_complete file with similar content to <span class="sout">your </span><span class="uwave">the </span>UDK root:
</p>
<!--l. 684-->
<a 
 id="x1-11010r2"></a>
<a 
 id="x1-11011"></a>
<div class="lstlisting" id="listing-2"><span class="label"><a 
 id="x1-11012r1"></a></span>-I/UefiPackages/MdePkg <br /><span class="label"><a 
 id="x1-11013r2"></a></span>-I/UefiPackages/MdePkg/Include <br /><span class="label"><a 
 id="x1-11014r3"></a></span>-I/UefiPackages/MdePkg/Include/X64 <br /><span class="label"><a 
 id="x1-11015r4"></a></span>-I/UefiPackages/MdeModulePkg <br /><span class="label"><a 
 id="x1-11016r5"></a></span>-I/UefiPackages/MdeModulePkg/Include <br /><span class="label"><a 
 id="x1-11017r6"></a></span>-I/UefiPackages/MdeModulePkg/Include/X64 <br /><span class="label"><a 
 id="x1-11018r7"></a></span>-I/UefiPackages/OpenCorePkg/Include/AMI <br /><span class="label"><a 
 id="x1-11019r8"></a></span>-I/UefiPackages/OpenCorePkg/Include/Acidanthera <br /><span class="label"><a 
 id="x1-11020r9"></a></span>-I/UefiPackages/OpenCorePkg/Include/Apple <br /><span class="label"><a 
 id="x1-11021r10"></a></span>-I/UefiPackages/OpenCorePkg/Include/Apple/X64 <br /><span class="label"><a 
 id="x1-11022r11"></a></span>-I/UefiPackages/OpenCorePkg/Include/Duet <br /><span class="label"><a 
 id="x1-11023r12"></a></span>-I/UefiPackages/OpenCorePkg/Include/Generic <br /><span class="label"><a 
 id="x1-11024r13"></a></span>-I/UefiPackages/OpenCorePkg/Include/Intel <br /><span class="label"><a 
 id="x1-11025r14"></a></span>-I/UefiPackages/OpenCorePkg/Include/Microsoft <br /><span class="label"><a 
 id="x1-11026r15"></a></span>-I/UefiPackages/OpenCorePkg/Include/VMware <br /><span class="label"><a 
 id="x1-11027r16"></a></span>-I/UefiPackages/OvmfPkg/Include <br /><span class="label"><a 
 id="x1-11028r17"></a></span>-I/UefiPackages/UefiCpuPkg/Include <br /><span class="label"><a 
 id="x1-11029r18"></a></span>-IInclude <br /><span class="label"><a 
 id="x1-11030r19"></a></span>-include <br /><span class="label"><a 
 id="x1-11031r20"></a></span>/UefiPackages/MdePkg/Include/Uefi.h <br /><span class="label"><a 
 id="x1-11032r21"></a></span>-fshort-wchar <br /><span class="label"><a 
 id="x1-11033r22"></a></span>-Wall <br /><span class="label"><a 
 id="x1-11034r23"></a></span>-Wextra <br /><span class="label"><a 
 id="x1-11035r24"></a></span>-Wno-unused-parameter <br /><span class="label"><a 
 id="x1-11036r25"></a></span>-Wno-missing-braces <br /><span class="label"><a 
 id="x1-11037r26"></a></span>-Wno-missing-field-initializers <br /><span class="label"><a 
 id="x1-11038r27"></a></span>-Wno-tautological-compare <br /><span class="label"><a 
 id="x1-11039r28"></a></span>-Wno-sign-compare <br /><span class="label"><a 
 id="x1-11040r29"></a></span>-Wno-varargs <br /><span class="label"><a 
 id="x1-11041r30"></a></span>-Wno-unused-const-variable <br /><span class="label"><a 
 id="x1-11042r31"></a></span>-DOC_TARGET_NOOPT=1 <br /><span class="label"><a 
 id="x1-11043r32"></a></span>-DNO_MSABI_VA_FUNCS=1
<figcaption class="caption" ><span class="id">Listing 2:</span><span  
class="content">ECC Configuration</span></figcaption><!--tex4ht:label?: x1-11010r -->
</div>
<!--l. 719--><p class="noindent" >Warning: Tool developers modifying config.plist or any other OpenCore files must ensure that their tool checks for
opencore-version NVRAM variable (see <a 
href="#x1-440004">Debug Properties</a> section below) and warn the user if the version listed is
unsupported or prerelease. OpenCore configuration may change across the releases and the tool shall ensure that it carefully
follows this document. Failure to do so may result in this tool to be considered as malware and blocked with all possible
means.
<a 
 id="x1-11044r12"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">3.4   </span> <a 
 id="x1-120004"></a>Coding conventions</h4>
<!--l. 729--><p class="noindent" >Just like any other project we have conventions that we follow during the development. All third-party contributors are highly
                                                                                                  
                                                                                                  
     <li 
  class="enumerate" id="x1-19014x7">OemTableId<br 
class="newline" />Type: plist data, 8 bytes<br 
class="newline" />Failsafe: All zero<br 
class="newline" />Description: Match table OEM ID to be equal to this value unless all zero.
     </li>
     <li 
  class="enumerate" id="x1-19016x8">Replace<br 
class="newline" />Type: plist data<br 
class="newline" />Failsafe: Empty data<br 
class="newline" />Description: Replacement data of one or more bytes.
     </li>
     <li 
  class="enumerate" id="x1-19018x9">ReplaceMask<br 
class="newline" />Type: plist data<br 
class="newline" />Failsafe: Empty data<br 
class="newline" />Description: Data bitwise mask used during replacement. Allows fuzzy replacement by updating masked (set
     to non-zero) bits. Can be set to empty data to be ignored. Must equal to Replace in size otherwise.
     </li>
     <li 
  class="enumerate" id="x1-19020x10">Skip<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: Number of found occurrences to be skipped before replacement is done.
     </li>
     <li 
  class="enumerate" id="x1-19022x11">TableLength<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: Match table size to be equal to this value unless 0.
     </li>
     <li 
  class="enumerate" id="x1-19024x12">TableSignature<br 
class="newline" />Type: plist data, 4 bytes<br 
class="newline" />Failsafe: All zero<br 
class="newline" />Description: Match table signature to be equal to this value unless all zero.
     </li></ol>
<!--l. 1104--><p class="noindent" >In the majority of the cases ACPI patches are not useful and harmful:
</p>
     <ul class="itemize1">
     <li class="itemize">Avoid renaming devices with ACPI patches. This may fail or perform improper renaming of unrelated devices
     (e.g. EC and EC0), be unnecessary, or even fail to rename devices in select tables. For ACPI consistency it is much
     safer to rename devices at I/O Registry level, as done by <a 
href="https://github.com/acidanthera/WhateverGreen" >WhateverGreen</a>.
     </li>
     <li class="itemize"><span class="sout">Avoid </span><span class="uwave">Try to avoid </span>patching _OSI to support a higher level of feature sets <span class="sout">unless absolutely required</span><span class="uwave">whenever
     possible</span>. Commonly this enables a number of hacks on APTIO firmwares, which result in the need to add more
     patches. Modern firmwares generally do not need it at all, and those that do are fine with much smaller patches.
     <span class="uwave">However, laptop vendors usually rely on this method to determine the availability of functions like modern I2C
     input support, thermal adjustment and custom feature additions. </span>
     </li>
     <li class="itemize"><span class="uwave">Avoid patching embedded controller event </span><span class="uwave">_Qxx</span> <span class="uwave">just for enabling brightness keys. The conventional process to
     find these keys usually involves massive modification on DSDT and SSDTs and the debug kext is not stable on
     newer systems. Please switch to built-in brightness key discovery of </span><a 
href="https://github.com/acidanthera/VoodooPS2" >VoodooPS2</a> <span class="uwave">instead. </span>
     </li>
     <li class="itemize">Try to avoid hacky changes like renaming _PRW or _DSM whenever possible.</li></ul>
<!--l. 1133--><p class="noindent" >Several cases, where patching actually does make sense, include:
</p>
                                                                                                  
                                                                                                  
     <ul class="itemize1">
     <li class="itemize">Refreshing HPET (or another device) method header to avoid compatibility checks by _OSI on legacy hardware.
     _STA method  with  if ((OSFL () == Zero)) { If (HPTE) ... Return (Zero) content  may  be  forced  to
     always return 0xF by replacing A0 10 93 4F 53 46 4C 00 with A4 0A 0F A3 A3 A3 A3 A3.
     </li>
     <li class="itemize">To provide custom method implementation with in an SSDT, for instance, to <span class="sout">report functional key presses on
     a laptop</span><span class="uwave">inject shutdown fix on certain computers</span>, the original method can be replaced with a dummy name by
     patching _<span class="sout">Q11</span><span class="uwave">PTS</span> with <span class="sout">XQ11</span><span class="uwave">ZPTS</span> <span class="uwave">and adding a callback to original method</span>.</li></ul>
<!--l. 1149--><p class="noindent" >Tianocore <a 
href="https://github.com/acidanthera/audk/blob/master/MdePkg/Include/IndustryStandard/AcpiAml.h" >AcpiAml.h</a> source file may help understanding ACPI opcodes.
</p><!--l. 1152--><p class="noindent" >Note: Patches of different Find and Replace lengths are unsupported as they may corrupt ACPI tables and make
<span class="sout">you </span><span class="uwave">the </span>system unstable due to area relocation. If <span class="sout">you need such changes you may utilise </span><span class="uwave">such changes are
needed, the utilisation of </span>“proxy” patching or <span class="uwave">the padding of </span>NOP <span class="uwave">to </span>the remaining area <span class="uwave">might be taken into
account</span>.
<a 
 id="x1-19025r22"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">4.6   </span> <a 
 id="x1-200006"></a>Quirks Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-20002x1">FadtEnableReset<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Provide reset register and flag in FADT table to enable reboot and shutdown.
     <!--l. 1168--><p class="noindent" >Mainly required on legacy hardware and few laptops. Can also fix power-button shortcuts. Not recommended
     unless required.
     </p></li>
     <li 
  class="enumerate" id="x1-20004x2">NormalizeHeaders<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description:  Cleanup  ACPI  header  fields  to  workaround  macOS  ACPI  implementation  bug  causing  boot
     crashes. Reference: <a 
href="https://alextjam.es/debugging-appleacpiplatform/" >Debugging AppleACPIPlatform on 10.13</a> by Alex James aka theracermaster. The issue is
     fixed in macOS Mojave (10.14).
     </li>
     <li 
  class="enumerate" id="x1-20006x3">RebaseRegions<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Attempt to heuristically relocate ACPI memory regions. Not recommended.
     <!--l. 1188--><p class="noindent" >ACPI   tables   are   often   generated   dynamically   by   underlying   firmware   implementation.   Among   the
     position-independent  code,  ACPI  tables  may  contain  physical  addresses  of  MMIO  areas  used  for  device
     configuration,  usually  grouped  in  regions  (e.g.  OperationRegion).  Changing  firmware  settings  or  hardware
     configuration, upgrading or patching the firmware inevitably leads to changes in dynamically generated ACPI
     code, which sometimes lead to the shift of the addresses in aforementioned OperationRegion constructions.
     </p><!--l. 1198--><p class="noindent" >For this reason it is very dangerous to apply any kind of modifications to ACPI tables. The most reasonable
     approach is to make as few as possible changes to ACPI and try to not replace any tables, especially DSDT.
     When this is not possible, then at least attempt to ensure that custom DSDT is based on the most recent DSDT
     or remove writes and reads for the affected areas.
     </p><!--l. 1205--><p class="noindent" >When nothing else helps this option could be tried to avoid stalls at PCI Configuration Begin phase of macOS
     booting by attempting to fix the ACPI addresses. It does not do magic, and only works with most common cases.
     Do not use unless absolutely required.
     </p></li>
     <li 
  class="enumerate" id="x1-20008x4">ResetHwSig<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Reset FACS table HardwareSignature value to 0.
     <!--l. 1217--><p class="noindent" >This works around firmwares that fail to maintain hardware signature across the reboots and cause issues with
     waking from hibernation.
     </p></li>
     <li 
  class="enumerate" id="x1-20010x5">ResetLogoStatus<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Reset BGRT table Displayed status field to false.
     <!--l. 1227--><p class="noindent" >This works around firmwares that provide BGRT table but fail to handle screen updates afterwards.
</p>
     </li></ol>
<a 
 id="x1-20011r17"></a>
<h3 class="sectionHead"><span class="titlemark">5   </span> <a 
 id="x1-210005"></a>Booter</h3>
<a 
 id="x1-21001r23"></a>
<h4 class="subsectionHead"><span class="titlemark">5.1   </span> <a 
 id="x1-220001"></a>Introduction</h4>
<!--l. 1237--><p class="noindent" >This section allows to apply different kinds of UEFI modifications on Apple bootloader (boot.efi). The modifications
currently provide various patches and environment alterations for different firmwares. Some of these features were originally
implemented as a part of <a 
href="https://github.com/acidanthera/AptioFixPkg" >AptioMemoryFix.efi</a>, which is no longer maintained. See <a 
href="#x1-810005">Tips and Tricks</a> section for migration
steps.
</p><!--l. 1245--><p class="noindent" >If <span class="sout">you are using this </span><span class="uwave">this is used </span>for the first time on a customised firmware, there is a list of checks to do first. Prior to
starting<span class="sout">please ensure that you have</span><span class="uwave">, the following requirements should be fulfilled</span>:
</p>
     <ul class="itemize1">
     <li class="itemize">Most up-to-date UEFI firmware (check <span class="sout">your </span><span class="uwave">the </span>motherboard vendor website).
     </li>
     <li class="itemize">Fast Boot and Hardware Fast Boot disabled in firmware settings if present.
     </li>
     <li class="itemize">Above 4G Decoding or similar enabled in firmware settings if present. Note, that on some motherboards (notably
     ASUS WS-X299-PRO) this option causes adverse effects, and must be disabled. While no other motherboards
     with the same issue are known, consider this option to be first to check if <span class="sout">you have </span><span class="uwave">one encounters </span>erratic boot
     failures.
     </li>
     <li class="itemize">DisableIoMapper quirk enabled, or VT-d disabled in firmware settings if present, or ACPI DMAR table deleted.
     </li>
     <li class="itemize">No ‘slide‘ boot argument present in NVRAM or anywhere else. It is not necessary unless <span class="sout">you cannot boot </span><span class="uwave">the
     system cannot be booted </span>at all or <span class="sout">see </span>No slide values are usable! Use custom slide! message <span class="uwave">can be seen
     </span>in the log.
     </li>
     <li class="itemize">CFG Lock (MSR 0xE2 write protection) disabled in firmware settings if present. Consider <a 
href="https://github.com/LongSoft/UEFITool/blob/master/UEFIPatch/patches.txt" >patching it</a> if <span class="sout">you have
     enough skills and </span>no option is available <span class="uwave">(for sophisticated users only)</span>. See <a 
href="#x1-380008">VerifyMsrE2</a> notes for more details.
     </li>
     <li class="itemize">CSM (Compatibility Support Module) disabled in firmware settings if present. <span class="sout">You may need to flash GOP ROM
     on </span><span class="uwave">On </span>NVIDIA 6xx/AMD 2xx or older<span class="uwave">, GOP ROM may have to be flashed first</span>. Use <a 
href="https://www.win-raid.com/t892f16-AMD-and-Nvidia-GOP-update-No-requests-DIY.html" >GopUpdate</a> (see the second
     post) or <a 
href="http://www.insanelymac.com/forum/topic/299614-asus-eah6450-video-bios-uefi-gop-upgrade-and-gop-uefi-binary-in-efi-for-many-ati-cards/page-1#entry2042163" >AMD UEFI GOP MAKER</a> in case <span class="sout">you are not sure how</span><span class="uwave">of any potential confusion</span>.
     </li>
     <li class="itemize">EHCI/XHCI Hand-off enabled in firmware settings only if boot stalls unless USB devices are disconnected.
     </li>
     <li class="itemize">VT-x, Hyper Threading, Execute Disable Bit enabled in firmware settings if present.
     </li>
     <li class="itemize">While it may not be required, sometimes <span class="sout">you have to disable </span>Thunderbolt support, Intel SGX, and Intel
     Platform Trust <span class="uwave">may have to be disabled </span>in firmware settings present.</li></ul>
<!--l. 1286--><p class="noindent" >When debugging sleep issues <span class="sout">you may want to (temporarily) disable </span>Power Nap and automatic power off <span class="uwave">may be (temporarily)
                                                                                                  
                                                                                                  
     
     
     
      
     
     
      
     
     
      
     
     
      
     
     
                                                                                                  
                                                                                                  
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
         
         
         
         
      
     
     
      
     
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
     
      
     
     
      
     
            
      
     
     
      
     
      
      
      
     
     
      
     
     
      
     
     
      
     
     
                
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
                          
      
     
     
      
     
     
      
     
                                
      
     
     
      
     
     
      
     
     
      
     
     
      
     
                                     
      
     
     
      
     
       
      
     
     
      
     
     
      
     
     
      
         
      
        
      
     
        
      
     
     
      
        
                                                                                                  
                                                                                                  
      ardware BoardSerialNumber. Override for MLB. Present on newer Macs (2013+ at least).
     </li>
     <li class="itemize">4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:HW_ROM
     Hardware ROM. Override for ROM. Present on newer Macs (2013+ at least).
     </li>
     <li class="itemize">7C436110-AB2A-4BBB-A880-FE41995C9F82:prev-lang:kbd
     ASCII string defining default keyboard layout. Format is lang-COUNTRY:keyboard, e.g. ru-RU:252 for Russian
     locale and ABC keyboard. Also accepts short forms: ru:252 or ru:0 (U.S. keyboard, compatible with 10.9). Full
     decoded keyboard list from AppleKeyboardLayouts-L.dat can be found <a 
href="https://github.com/acidanthera/OpenCorePkg/tree/master/Utilities/AppleKeyboardLayouts" >here</a>. Using non-latin keyboard on 10.14
     will not enable ABC keyboard, unlike previous and subsequent macOS versions, and is thus not recommended
     in case <span class="sout">you need </span>10.14 <span class="uwave">is needed</span>.
     </li>
     <li class="itemize">7C436110-AB2A-4BBB-A880-FE41995C9F82:security-mode
     ASCII  string  defining  FireWire  security  mode.  Legacy,  can  be  found  in  IOFireWireFamily  source  code  in
     <a 
href="https://opensource.apple.com/source/IOFireWireFamily/IOFireWireFamily-473/IOFireWireFamily.kmodproj/IOFireWireController.cpp.auto.html" >IOFireWireController.cpp</a>. It is recommended not to set this variable, which may speedup system startup. Setting
     to full is equivalent to not setting the variable and none disables FireWire security.
     </li>
     <li class="itemize">4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:UIScale
     One-byte data defining boot.efi user interface scaling. Should be 01 for normal screens and 02 for HiDPI
     screens.
     </li>
     <li class="itemize">4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:DefaultBackgroundColor
     Four-byte BGRA data defining boot.efi user interface background colour. Standard colours include BF BF BF
     00 (Light Gray) and 00 00 00 00 (Syrah Black). Other colours may be set at user’s preference.</li></ul>
<a 
 id="x1-51001r54"></a>
<h4 class="subsectionHead"><span class="titlemark">9.5   </span> <a 
 id="x1-520005"></a>Other Variables</h4>
<!--l. 4096--><p class="noindent" >The following variables may be useful for certain configurations or troubleshooting:
</p>
     <ul class="itemize1">
     <li class="itemize">7C436110-AB2A-4BBB-A880-FE41995C9F82:boot-args
     Kernel arguments, used to pass configuration to Apple kernel and drivers. There are many arguments, which
     may be found by looking for the use of PE_parse_boot_argn function in the kernel or driver code. Some of the
     known boot arguments include:
         <ul class="itemize2">
         <li class="itemize">acpi_layer=0xFFFFFFFF
         </li>
         <li class="itemize">acpi_level=0xFFFF5F (implies <a 
href="https://github.com/acpica/acpica/blob/master/source/include/acoutput.h" >ACPI_ALL_COMPONENTS</a>)
         </li>
         <li class="itemize"><span class="uwave">arch=i386</span> <span class="uwave">(force kernel architecture to </span><span class="uwave">i386</span><span class="uwave">, see </span><span class="uwave">KernelArch</span><span class="uwave">) </span>
         </li>
         <li class="itemize">batman=VALUE (AppleSmartBatteryManager debug mask)
         </li>
         <li class="itemize">batman-nosmc=1 (disable AppleSmartBatteryManager SMC interface)
         </li>
         <li class="itemize">cpus=VALUE (maximum number of CPUs used)
         </li>
         <li class="itemize">debug=VALUE (debug mask)
         </li>
         <li class="itemize">io=VALUE (IOKit debug mask)
         </li>
         <li class="itemize">keepsyms=1 (show panic log debug symbols)
         </li>
         <li class="itemize">kextlog=VALUE (kernel extension loading debug mask)
         </li>
         <li class="itemize">nv_disable=1 (disables NVIDIA GPU acceleration)
         </li>
                                                                                                  
                                                                                                  
         <li class="itemize">nvda_drv=1 (legacy way to enable NVIDIA web driver, removed in 10.12)
         </li>
         <li class="itemize">npci=0x2000 (<a 
href="https://www.insanelymac.com/forum/topic/260539-1068-officially-released/?do=findComment&comment=1707972" >legacy</a>, disables kIOPCIConfiguratorPFM64)
         </li>
         <li class="itemize">lapic_dont_panic=1
         </li>
         <li class="itemize">slide=VALUE (manually set KASLR slide)
         </li>
         <li class="itemize">smcdebug=VALUE (AppleSMC debug mask)
         </li>
         <li class="itemize">-amd_no_dgpu_accel (alternative to <a 
href="https://github.com/acidanthera/WhateverGreen" >WhateverGreen</a>’s -radvesa for new GPUs)
         </li>
         <li class="itemize">-nehalem_error_disable
         </li>
         <li class="itemize">-no_compat_check (disable model checking <span class="uwave">on 10.7+</span>)
         </li>
         <li class="itemize">-s (single mode)
         </li>
         <li class="itemize">-v (verbose mode)
         </li>
         <li class="itemize">-x (safe mode)</li></ul>
     <!--l. 4136--><p class="noindent" >There are multiple external places summarising macOS argument lists: <a 
href="https://osxeon.wordpress.com/2015/08/10/boot-argument-options-in-os-x" >example 1</a>, <a 
href="https://superuser.com/questions/255176/is-there-a-list-of-available-boot-args-for-darwin-os-x" >example 2</a>.
     </p></li>
     <li class="itemize">7C436110-AB2A-4BBB-A880-FE41995C9F82:bootercfg
     Booter arguments, similar to boot-args but for boot.efi. Accepts a set of arguments, which are hexadecimal 64-bit
     values with or without 0x. At different stages boot.efi will request different debugging (logging) modes (e.g. after
     ExitBootServices it will only print to serial). Several booter arguments control whether these requests will succeed. The
     list of known requests is covered below:
         <ul class="itemize2">
         <li class="itemize">0x00 – INIT.
         </li>
         <li class="itemize">0x01 – VERBOSE (e.g. -v, force console logging).
         </li>
         <li class="itemize">0x02 – EXIT.
         </li>
         <li class="itemize">0x03 – RESET:OK.
         </li>
         <li class="itemize">0x04 – RESET:FAIL (e.g. unknown board-id, hibernate mismatch, panic loop, etc.).
         </li>
         <li class="itemize">0x05 – RESET:RECOVERY.
         </li>
         <li class="itemize">0x06 – RECOVERY.
         </li>
         <li class="itemize">0x07 – REAN:START.
         </li>
         <li class="itemize">0x08 – REAN:END.
         </li>
         <li class="itemize">0x09 – DT (can no longer log to DeviceTree).
         </li>
         <li class="itemize">0x0A – EXITBS:START (forced serial only).
         </li>
         <li class="itemize">0x0B – EXITBS:END (forced serial only).
         </li>
         <li class="itemize">0x0C – UNKNOWN.</li></ul>
     <!--l. 4167--><p class="noindent" >In 10.15 debugging support was mostly broken before 10.15.4 due to some kind of refactoring and introduction of a <a 
href="https://github.com/acidanthera/OpenCorePkg/blob/master/Include/Apple/Protocol/AppleDebugLog.h" >new
     debug protocol</a>. Some of the arguments and their values below may not be valid for versions prior to 10.15.4. The list of
     known arguments is covered below:
                                                                                                  
                                                                                                  
             <li class="itemize">1 — enables serial logging for EXITBS:END onwards.
             </li>
             <li class="itemize"><span class="sout">1</span><span class="uwave">2</span> — enables serial logging for EXITBS:START onwards.
             </li>
             <li class="itemize">3 — enables serial logging when debug protocol is missing.
             </li>
             <li class="itemize">4 — enables serial logging unconditionally.</li></ul>
         </li>
         <li class="itemize">timestamps=VALUE — enables timestamp logging.
             <ul class="itemize3">
             <li class="itemize">0 — disables timestamp logging.
             </li>
             <li class="itemize">1 — enables timestamp logging (default).</li></ul>
         </li>
         <li class="itemize">log=VALUE — deprecated starting from 10.15.
             <ul class="itemize3">
             <li class="itemize">1 — AppleLoggingConOutOrErrSet/AppleLoggingConOutOrErrPrint (classical ConOut/StdErr)
             </li>
             <li class="itemize">2 — AppleLoggingStdErrSet/AppleLoggingStdErrPrint (StdErr or serial?)
             </li>
             <li class="itemize">4  —   AppleLoggingFileSet/AppleLoggingFilePrint   (BOOTER.LOG/BOOTER.OLD   file   on   EFI
             partition)</li></ul>
         </li>
         <li class="itemize">debug=VALUE — deprecated starting from 10.15.
             <ul class="itemize3">
             <li class="itemize">1 — enables print something to BOOTER.LOG (stripped code implies there may be a crash)
             </li>
             <li class="itemize">2 — enables perf logging to /efi/debug-log in the device three
             </li>
             <li class="itemize">4 — enables timestamp printing for styled printf calls</li></ul>
         </li>
         <li class="itemize">level=VALUE — deprecated starting from 10.15. Verbosity level of DEBUG output. Everything but 0x80000000 is
         stripped from the binary, and this is the default value.</li></ul>
     <!--l. 4246--><p class="noindent" >Note: To see verbose output from boot.efi on modern macOS versions enable AppleDebug option. This will save the log
     to general OpenCore log. For versions before 10.15.4 set bootercfg to log=1. This will print verbose output
     onscreen.
     </p></li>
     <li class="itemize">7C436110-AB2A-4BBB-A880-FE41995C9F82:bootercfg-once
     Booter arguments override removed after first launch. Otherwise equivalent to bootercfg.
     </li>
     <li class="itemize">7C436110-AB2A-4BBB-A880-FE41995C9F82:efiboot-perf-record
     Enable performance log saving in boot.efi. Performance log is saved to physical memory and is pointed by
     efiboot-perf-record-data and efiboot-perf-record-size variables. Starting from 10.15.4 it can also be saved to
     OpenCore log by AppleDebug option.
     </li>
     <li class="itemize">7C436110-AB2A-4BBB-A880-FE41995C9F82:fmm-computer-name
     Current saved host name. ASCII string.
     </li>
     <li class="itemize">7C436110-AB2A-4BBB-A880-FE41995C9F82:nvda_drv
     NVIDIA Web Driver control variable. Takes ASCII digit 1 or 0 to enable or disable installed driver.
     </li>
     <li class="itemize">7C436110-AB2A-4BBB-A880-FE41995C9F82:run-efi-updater
     Override EFI firmware updating support in macOS (MultiUpdater, ThorUtil, and so on). Setting this to No or
     alternative boolean-castable value will prevent any firmware updates in macOS starting with 10.10 at
     least.
     </li>
     <li class="itemize">7C436110-AB2A-4BBB-A880-FE41995C9F82:StartupMute
                                                                                                  
                                                                                                  
     
     
     
     
     
      
     
     
      
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </body>
</html>